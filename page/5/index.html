<!DOCTYPE html>
<html lang="zh-CN">
<head>
  <meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=2">
<meta name="theme-color" content="#222">
<meta name="generator" content="Hexo 5.3.0">
  <link rel="apple-touch-icon" sizes="180x180" href="/images/apple-touch-icon-next.png">
  <link rel="icon" type="image/png" sizes="32x32" href="/images/favicon-32x32-next.png">
  <link rel="icon" type="image/png" sizes="16x16" href="/images/favicon-16x16-next.png">
  <link rel="mask-icon" href="/images/logo.svg" color="#222">

<link rel="stylesheet" href="/css/main.css">


<link rel="stylesheet" href="/lib/font-awesome/css/all.min.css">

<script id="hexo-configurations">
    var NexT = window.NexT || {};
    var CONFIG = {"hostname":"example.com","root":"/","scheme":"Muse","version":"7.8.0","exturl":false,"sidebar":{"position":"left","display":"post","padding":18,"offset":12,"onmobile":false},"copycode":{"enable":false,"show_result":false,"style":null},"back2top":{"enable":true,"sidebar":false,"scrollpercent":false},"bookmark":{"enable":false,"color":"#222","save":"auto"},"fancybox":false,"mediumzoom":false,"lazyload":false,"pangu":false,"comments":{"style":"tabs","active":null,"storage":true,"lazyload":false,"nav":null},"algolia":{"hits":{"per_page":10},"labels":{"input_placeholder":"Search for Posts","hits_empty":"We didn't find any results for the search: ${query}","hits_stats":"${hits} results found in ${time} ms"}},"localsearch":{"enable":false,"trigger":"auto","top_n_per_article":1,"unescape":false,"preload":false},"motion":{"enable":true,"async":false,"transition":{"post_block":"fadeIn","post_header":"slideDownIn","post_body":"slideDownIn","coll_header":"slideLeftIn","sidebar":"slideUpIn"}}};
  </script>

  <meta name="description" content="正在享受无法回避的痛苦">
<meta property="og:type" content="website">
<meta property="og:title" content="Sary.severus&#96;s blog">
<meta property="og:url" content="http://example.com/page/5/index.html">
<meta property="og:site_name" content="Sary.severus&#96;s blog">
<meta property="og:description" content="正在享受无法回避的痛苦">
<meta property="og:locale" content="zh_CN">
<meta property="article:author" content="severus">
<meta name="twitter:card" content="summary">

<link rel="canonical" href="http://example.com/page/5/">


<script id="page-configurations">
  // https://hexo.io/docs/variables.html
  CONFIG.page = {
    sidebar: "",
    isHome : true,
    isPost : false,
    lang   : 'zh-CN'
  };
</script>

  <title>Sary.severus`s blog</title>
  






  <noscript>
  <style>
  .use-motion .brand,
  .use-motion .menu-item,
  .sidebar-inner,
  .use-motion .post-block,
  .use-motion .pagination,
  .use-motion .comments,
  .use-motion .post-header,
  .use-motion .post-body,
  .use-motion .collection-header { opacity: initial; }

  .use-motion .site-title,
  .use-motion .site-subtitle {
    opacity: initial;
    top: initial;
  }

  .use-motion .logo-line-before i { left: initial; }
  .use-motion .logo-line-after i { right: initial; }
  </style>
</noscript>

</head>

<body itemscope itemtype="http://schema.org/WebPage">
  <div class="container use-motion">
    <div class="headband"></div>

    <header class="header" itemscope itemtype="http://schema.org/WPHeader">
      <div class="header-inner"><div class="site-brand-container">
  <div class="site-nav-toggle">
    <div class="toggle" aria-label="切换导航栏">
      <span class="toggle-line toggle-line-first"></span>
      <span class="toggle-line toggle-line-middle"></span>
      <span class="toggle-line toggle-line-last"></span>
    </div>
  </div>

  <div class="site-meta">

    <a href="/" class="brand" rel="start">
      <span class="logo-line-before"><i></i></span>
      <h1 class="site-title">Sary.severus`s blog</h1>
      <span class="logo-line-after"><i></i></span>
    </a>
  </div>

  <div class="site-nav-right">
    <div class="toggle popup-trigger">
    </div>
  </div>
</div>




<nav class="site-nav">
  <ul id="menu" class="main-menu menu">
        <li class="menu-item menu-item-home">

    <a href="/" rel="section"><i class="fa fa-home fa-fw"></i>首页</a>

  </li>
        <li class="menu-item menu-item-about">

    <a href="/about/" rel="section"><i class="fa fa-user fa-fw"></i>关于</a>

  </li>
        <li class="menu-item menu-item-tags">

    <a href="/tags/" rel="section"><i class="fa fa-tags fa-fw"></i>标签</a>

  </li>
        <li class="menu-item menu-item-categories">

    <a href="/categories/" rel="section"><i class="fa fa-th fa-fw"></i>分类</a>

  </li>
        <li class="menu-item menu-item-archives">

    <a href="/archives/" rel="section"><i class="fa fa-archive fa-fw"></i>归档</a>

  </li>
  </ul>
</nav>




</div>
    </header>

    
  <div class="back-to-top">
    <i class="fa fa-arrow-up"></i>
    <span>0%</span>
  </div>


    <main class="main">
      <div class="main-inner">
        <div class="content-wrap">
          

          <div class="content index posts-expand">
            
      
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="zh-CN">
    <link itemprop="mainEntityOfPage" href="http://example.com/2021/01/15/DB2%E6%95%B0%E6%8D%AE%E5%BA%93%E7%9A%84%E5%A4%87%E4%BB%BD%E6%81%A2%E5%A4%8D/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/00-00-00.JPG">
      <meta itemprop="name" content="severus">
      <meta itemprop="description" content="正在享受无法回避的痛苦">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Sary.severus`s blog">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          
            <a href="/2021/01/15/DB2%E6%95%B0%E6%8D%AE%E5%BA%93%E7%9A%84%E5%A4%87%E4%BB%BD%E6%81%A2%E5%A4%8D/" class="post-title-link" itemprop="url">未命名</a>
        </h2>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">发表于</span>

              <time title="创建时间：2021-01-15 14:28:30" itemprop="dateCreated datePublished" datetime="2021-01-15T14:28:30+08:00">2021-01-15</time>
            </span>

          

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <h1 id="DB2数据库的备份恢复"><a href="#DB2数据库的备份恢复" class="headerlink" title="DB2数据库的备份恢复"></a>DB2数据库的备份恢复</h1><h2 id="基于BACKUP备份和RESTORE恢复"><a href="#基于BACKUP备份和RESTORE恢复" class="headerlink" title="基于BACKUP备份和RESTORE恢复"></a>基于BACKUP备份和RESTORE恢复</h2><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">-- 断开所有与数据库的连接为前提</span></span><br><span class="line"><span class="comment">-- 查看当前数据库连接数</span></span><br><span class="line">db2 list applications</span><br><span class="line"><span class="comment">-- 当前路径下进行备份</span></span><br><span class="line">db2 backup db DATABASE.NAME</span><br><span class="line"><span class="comment">-- 恢复备份</span></span><br><span class="line">db2 restore db DATABASE.NAME taken <span class="keyword">at</span> <span class="number">20201001123123</span></span><br><span class="line"><span class="comment">-- 根据向下兼容原则，低版本的数据库备份可以还原在相同版本或者高版本数据库上</span></span><br></pre></td></tr></table></figure>
<h2 id="基于db2move和db2look进行备份恢复"><a href="#基于db2move和db2look进行备份恢复" class="headerlink" title="基于db2move和db2look进行备份恢复"></a>基于db2move和db2look进行备份恢复</h2><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">-- 使用db2look将数据库结构导出到指定文件</span></span><br><span class="line">db2look <span class="operator">-</span>d DATABASE.NAME <span class="operator">-</span>e <span class="operator">-</span>a <span class="operator">-</span>o DATABASE.NAME.sql</span><br><span class="line"><span class="comment">-- -d为指定数据库，-e为抽取数据库对象的结构DDL，-a为所有用户模式，-o为指定文件输出名称</span></span><br><span class="line"><span class="comment">-- 将导出的数据库表结构进行导入</span></span><br><span class="line">db2 <span class="operator">-</span>tvf DATABASE.NAME.sql</span><br><span class="line"><span class="comment">-- 至此数据库表结构导入导出完成</span></span><br><span class="line"><span class="comment">-- 创建一个以数据库名称为名的文件夹</span></span><br><span class="line">mkdir DATABASE.NAME</span><br><span class="line">cd DATABASE.NAME</span><br><span class="line"><span class="comment">-- 导出数据</span></span><br><span class="line">db2move DATABASE.NAME export <span class="operator">-</span>u db2inst <span class="operator">-</span>p <span class="number">12345678</span></span><br><span class="line"><span class="comment">-- 将文件夹拷贝到要恢复的数据库下</span></span><br><span class="line"><span class="comment">-- 进入文件夹后恢复操作</span></span><br><span class="line">db2move DATABASE.NAME load</span><br></pre></td></tr></table></figure>
<h2 id="遗漏的表"><a href="#遗漏的表" class="headerlink" title="遗漏的表"></a>遗漏的表</h2><p>导出表的时候，可能会有个别的表数据丢失，这时候只能执行db2move命令重新load，针对单个表进行操作</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">db2 load <span class="keyword">from</span> tab<span class="operator">*</span><span class="operator">*</span>.ixf <span class="keyword">of</span> ixf terminate <span class="keyword">into</span> TABLE.NAME  <span class="comment">--tab**.ixf对应的是tablename表</span></span><br></pre></td></tr></table></figure>

      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

      
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="zh-CN">
    <link itemprop="mainEntityOfPage" href="http://example.com/2021/01/15/DB2%E5%88%9B%E5%BB%BA%E5%88%86%E5%8C%BA%E8%A1%A8%E7%9A%84%E4%BE%8B%E5%AD%90/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/00-00-00.JPG">
      <meta itemprop="name" content="severus">
      <meta itemprop="description" content="正在享受无法回避的痛苦">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Sary.severus`s blog">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          
            <a href="/2021/01/15/DB2%E5%88%9B%E5%BB%BA%E5%88%86%E5%8C%BA%E8%A1%A8%E7%9A%84%E4%BE%8B%E5%AD%90/" class="post-title-link" itemprop="url">未命名</a>
        </h2>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">发表于</span>

              <time title="创建时间：2021-01-15 14:28:30" itemprop="dateCreated datePublished" datetime="2021-01-15T14:28:30+08:00">2021-01-15</time>
            </span>

          

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <p>分区表有着比较广泛的应用场景，特别是存储按月进行分区的数据时有明显的优势。下面是如何管理分区表的官方例子：</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br><span class="line">144</span><br><span class="line">145</span><br><span class="line">146</span><br><span class="line">147</span><br><span class="line">148</span><br><span class="line">149</span><br><span class="line">150</span><br><span class="line">151</span><br><span class="line">152</span><br><span class="line">153</span><br><span class="line">154</span><br><span class="line">155</span><br><span class="line">156</span><br><span class="line">157</span><br><span class="line">158</span><br><span class="line">159</span><br><span class="line">160</span><br><span class="line">161</span><br><span class="line">162</span><br><span class="line">163</span><br><span class="line">164</span><br><span class="line">165</span><br><span class="line">166</span><br><span class="line">167</span><br><span class="line">168</span><br><span class="line">169</span><br><span class="line">170</span><br><span class="line">171</span><br><span class="line">172</span><br><span class="line">173</span><br><span class="line">174</span><br><span class="line">175</span><br><span class="line">176</span><br><span class="line">177</span><br></pre></td><td class="code"><pre><span class="line">Version <span class="number">11.1</span><span class="number">.0</span></span><br><span class="line"></span><br><span class="line"><span class="comment">-----------------------------------------------------------------------------</span></span><br><span class="line"><span class="comment">-- (c) Copyright IBM Corp. 2007 All rights reserved.</span></span><br><span class="line"><span class="comment">-- </span></span><br><span class="line"><span class="comment">-- The following sample of source code (&quot;Sample&quot;) is owned by International </span></span><br><span class="line"><span class="comment">-- Business Machines Corporation or one of its subsidiaries (&quot;IBM&quot;) and is </span></span><br><span class="line"><span class="comment">-- copyrighted and licensed, not sold. You may use, copy, modify, and </span></span><br><span class="line"><span class="comment">-- distribute the Sample in any form without payment to IBM, for the purpose of </span></span><br><span class="line"><span class="comment">-- assisting you in the development of your applications.</span></span><br><span class="line"><span class="comment">-- </span></span><br><span class="line"><span class="comment">-- The Sample code is provided to you on an &quot;AS IS&quot; basis, without warranty of </span></span><br><span class="line"><span class="comment">-- any kind. IBM HEREBY EXPRESSLY DISCLAIMS ALL WARRANTIES, EITHER EXPRESS OR </span></span><br><span class="line"><span class="comment">-- IMPLIED, INCLUDING, BUT NOT LIMITED TO, THE IMPLIED WARRANTIES OF </span></span><br><span class="line"><span class="comment">-- MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE. Some jurisdictions do </span></span><br><span class="line"><span class="comment">-- not allow for the exclusion or limitation of implied warranties, so the above </span></span><br><span class="line"><span class="comment">-- limitations or exclusions may not apply to you. IBM shall not be liable for </span></span><br><span class="line"><span class="comment">-- any damages you suffer as a result of using, copying, modifying or </span></span><br><span class="line"><span class="comment">-- distributing the Sample, even if IBM has been advised of the possibility of </span></span><br><span class="line"><span class="comment">-- such damages.</span></span><br><span class="line"><span class="comment">-----------------------------------------------------------------------------</span></span><br><span class="line"><span class="comment">--</span></span><br><span class="line"><span class="comment">-- SOURCE FILE NAME: tablepartition.db2</span></span><br><span class="line"><span class="comment">--</span></span><br><span class="line"><span class="comment">-- SAMPLE: How to create a partitioned table. </span></span><br><span class="line"><span class="comment">--</span></span><br><span class="line"><span class="comment">--         This sample demonstrates:</span></span><br><span class="line"><span class="comment">--</span></span><br><span class="line"><span class="comment">--         - Various ways of creating a partitioned table using CREATE TABLE </span></span><br><span class="line"><span class="comment">--           statement.</span></span><br><span class="line"><span class="comment">--</span></span><br><span class="line"><span class="comment">-- SQL STATEMENTS USED:</span></span><br><span class="line"><span class="comment">--         CREATE TABLE</span></span><br><span class="line"><span class="comment">--         CREATE TABLESPACE</span></span><br><span class="line"><span class="comment">--         DROP TABLE</span></span><br><span class="line"><span class="comment">--         TERMINATE</span></span><br><span class="line"><span class="comment">--</span></span><br><span class="line"><span class="comment">--                           </span></span><br><span class="line"><span class="comment">-----------------------------------------------------------------------------</span></span><br><span class="line"><span class="comment">--</span></span><br><span class="line"><span class="comment">-- For more information about the command line processor (CLP) scripts,</span></span><br><span class="line"><span class="comment">-- see the README file.</span></span><br><span class="line"><span class="comment">--</span></span><br><span class="line"><span class="comment">-- For information on using SQL statements, see the SQL Reference.</span></span><br><span class="line"><span class="comment">--</span></span><br><span class="line"><span class="comment">-- For the latest information on programming, building, and running DB2</span></span><br><span class="line"><span class="comment">-- applications, visit the DB2 Information Center:</span></span><br><span class="line"><span class="comment">--     http://publib.boulder.ibm.com/infocenter/db2luw/v9r7/index.jsp</span></span><br><span class="line"><span class="comment">-----------------------------------------------------------------------------</span></span><br><span class="line"></span><br><span class="line"><span class="comment">-- Connect to database.</span></span><br><span class="line"><span class="keyword">CONNECT</span> <span class="keyword">TO</span> sample;</span><br><span class="line"></span><br><span class="line"><span class="comment">-- Create DMS tablespaces.</span></span><br><span class="line"><span class="keyword">CREATE</span> <span class="keyword">TABLE</span>SPACE tbsp1 MANAGED <span class="keyword">BY</span> DATABASE <span class="keyword">USING</span> (FILE <span class="string">&#x27;conta&#x27;</span> <span class="number">1000</span>);</span><br><span class="line"><span class="keyword">CREATE</span> <span class="keyword">TABLE</span>SPACE tbsp2 MANAGED <span class="keyword">BY</span> DATABASE <span class="keyword">USING</span> (FILE <span class="string">&#x27;contb&#x27;</span> <span class="number">1000</span>);</span><br><span class="line"><span class="keyword">CREATE</span> <span class="keyword">TABLE</span>SPACE tbsp3 MANAGED <span class="keyword">BY</span> DATABASE <span class="keyword">USING</span> (FILE <span class="string">&#x27;contc&#x27;</span> <span class="number">1000</span>);</span><br><span class="line"><span class="keyword">CREATE</span> <span class="keyword">TABLE</span>SPACE tbsp4 MANAGED <span class="keyword">BY</span> DATABASE <span class="keyword">USING</span> (FILE <span class="string">&#x27;contd&#x27;</span> <span class="number">1000</span>);</span><br><span class="line"></span><br><span class="line"><span class="comment">-- Creating a partitioned table on a list of tablespaces. A table &#x27;emp_table&#x27;</span></span><br><span class="line"><span class="comment">-- with four partitions will be created. i.e part0 is placed in tbsp1, </span></span><br><span class="line"><span class="comment">-- part1 will be placed in tbsp2, part2 will be placed in tbsp3 and </span></span><br><span class="line"><span class="comment">-- part3 will be placed in tbsp4.</span></span><br><span class="line"><span class="keyword">CREATE</span> <span class="keyword">TABLE</span> emp_table(emp_no <span class="type">INT</span>) <span class="keyword">IN</span> tbsp1, tbsp2, tbsp3, tbsp4</span><br><span class="line">  <span class="keyword">PARTITION</span> <span class="keyword">BY</span> <span class="keyword">RANGE</span>(emp_no)</span><br><span class="line">    (STARTING <span class="number">0</span> ENDING <span class="number">9</span>,</span><br><span class="line">    STARTING <span class="number">10</span> ENDING <span class="number">19</span>,</span><br><span class="line">    STARTING <span class="number">20</span> ENDING <span class="number">29</span>,</span><br><span class="line">    STARTING <span class="number">30</span> ENDING <span class="number">39</span>);</span><br><span class="line"></span><br><span class="line"><span class="comment">-- Drop the table.</span></span><br><span class="line"><span class="keyword">DROP</span> <span class="keyword">TABLE</span> emp_table;</span><br><span class="line"></span><br><span class="line"><span class="comment">-- Creating a partitioned table by specifying tablespace for an individual  </span></span><br><span class="line"><span class="comment">-- data partition. A table &#x27;emp_table&#x27; with four partitions will be created.</span></span><br><span class="line"><span class="comment">-- i.e part0 is placed in tbsp1,  part1 will be placed in tbsp2,</span></span><br><span class="line"><span class="comment">-- part2 will be placed in tbsp3 and part3 will be placed in tbsp4.</span></span><br><span class="line"><span class="keyword">CREATE</span> <span class="keyword">TABLE</span> emp_table(emp_no <span class="type">INT</span>)</span><br><span class="line">  <span class="keyword">PARTITION</span> <span class="keyword">BY</span> <span class="keyword">RANGE</span>(emp_no)</span><br><span class="line">    (STARTING <span class="number">0</span> ENDING <span class="number">9</span> <span class="keyword">IN</span> tbsp1,</span><br><span class="line">    STARTING <span class="number">10</span> ENDING <span class="number">19</span> <span class="keyword">IN</span> tbsp2,</span><br><span class="line">    STARTING <span class="number">20</span> ENDING <span class="number">29</span> <span class="keyword">IN</span> tbsp3,</span><br><span class="line">    STARTING <span class="number">30</span> ENDING <span class="number">39</span> <span class="keyword">IN</span> tbsp4);</span><br><span class="line"></span><br><span class="line"><span class="comment">-- Drop the table.</span></span><br><span class="line"><span class="keyword">DROP</span> <span class="keyword">TABLE</span> emp_table;</span><br><span class="line"></span><br><span class="line"><span class="comment">-- Creating a partitioned table by placing data in a Round Robin</span></span><br><span class="line"><span class="comment">-- fashion among the tablespaces.</span></span><br><span class="line"><span class="comment">-- A table &#x27;emp_table&#x27; will be created with data placed in a Round Robin </span></span><br><span class="line"><span class="comment">-- fashion among tbsp1, tbsp2, tbps3 tablespaces.</span></span><br><span class="line"><span class="keyword">CREATE</span> <span class="keyword">TABLE</span> emp_table(emp_no <span class="type">INT</span>) <span class="keyword">IN</span> tbsp1, tbsp2, tbsp3</span><br><span class="line">  <span class="keyword">PARTITION</span> <span class="keyword">BY</span> <span class="keyword">RANGE</span>(emp_no)</span><br><span class="line">    (STARTING <span class="number">2</span> ENDING <span class="number">9</span> <span class="keyword">EVERY</span> <span class="number">2</span>);</span><br><span class="line"></span><br><span class="line"><span class="comment">-- Drop the table.</span></span><br><span class="line"><span class="keyword">DROP</span> <span class="keyword">TABLE</span> emp_table;</span><br><span class="line"></span><br><span class="line"><span class="comment">-- Creating a partitioned table by combining both the short and the long  </span></span><br><span class="line"><span class="comment">-- forms of the syntax.</span></span><br><span class="line"><span class="keyword">CREATE</span> <span class="keyword">TABLE</span> emp_table(emp_no <span class="type">INT</span>) <span class="keyword">IN</span> tbsp1, tbsp2</span><br><span class="line">  <span class="keyword">PARTITION</span> <span class="keyword">BY</span> <span class="keyword">RANGE</span>(emp_no)</span><br><span class="line">    (STARTING <span class="number">10</span> ENDING <span class="number">19</span> <span class="keyword">EVERY</span> <span class="number">2</span>,</span><br><span class="line">    STARTING <span class="number">0</span>   ENDING <span class="number">9</span>,</span><br><span class="line">    STARTING <span class="number">20</span>  ENDING <span class="number">29</span>);</span><br><span class="line"></span><br><span class="line"><span class="comment">-- Drop the table.</span></span><br><span class="line"><span class="keyword">DROP</span> <span class="keyword">TABLE</span> emp_table;</span><br><span class="line"></span><br><span class="line"><span class="comment">-- Creating a partitioned table &#x27;document&#x27; by using LONG IN clause to place </span></span><br><span class="line"><span class="comment">-- the LOB data in a specified tablespace.</span></span><br><span class="line"><span class="keyword">CREATE</span> <span class="keyword">TABLE</span> document(sno <span class="type">INT</span>, empid <span class="type">INT</span>)LONG <span class="keyword">IN</span> tbsp3, tbsp4</span><br><span class="line">  <span class="keyword">PARTITION</span> <span class="keyword">BY</span> <span class="keyword">RANGE</span>(empid) (STARTING <span class="number">1</span> ENDING <span class="number">1000</span> <span class="keyword">EVERY</span> <span class="number">100</span>);</span><br><span class="line"></span><br><span class="line"><span class="comment">-- Drop the table.</span></span><br><span class="line"><span class="keyword">DROP</span> <span class="keyword">TABLE</span> document;</span><br><span class="line"></span><br><span class="line"><span class="comment">-- Creatng a partitioned table &#x27;persons&#x27; using MINVALUE and MAXVALUE.</span></span><br><span class="line"><span class="keyword">CREATE</span> <span class="keyword">TABLE</span> persons (<span class="keyword">last</span>  <span class="type">character</span>(<span class="number">15</span>) <span class="keyword">not</span> <span class="keyword">null</span>,</span><br><span class="line">       	              <span class="keyword">first</span> <span class="type">character</span>(<span class="number">15</span>),</span><br><span class="line">	              middle  <span class="type">character</span>(<span class="number">15</span>))</span><br><span class="line">  <span class="keyword">PARTITION</span> <span class="keyword">BY</span> <span class="keyword">RANGE</span>(<span class="keyword">last</span>, <span class="keyword">first</span>, middle  ) </span><br><span class="line">    (part <span class="number">0</span> starting <span class="keyword">from</span> (MINVALUE, MINVALUE, MINVALUE),</span><br><span class="line">    part <span class="number">1</span> starting <span class="keyword">from</span> (<span class="string">&#x27;COX&#x27;</span>,     <span class="string">&#x27;ELIZABETH&#x27;</span>, <span class="string">&#x27;ELLEN&#x27;</span>  ) exclusive,</span><br><span class="line">    part <span class="number">2</span> starting <span class="keyword">from</span> (<span class="string">&#x27;HARDING&#x27;</span>, <span class="string">&#x27;TONYA&#x27;</span>,      MINVALUE),</span><br><span class="line">    part <span class="number">3</span> starting <span class="keyword">from</span> (<span class="string">&#x27;MACCA&#x27;</span>,    MINVALUE,    MINVALUE),</span><br><span class="line">    part <span class="number">4</span> starting <span class="keyword">from</span> (<span class="string">&#x27;SMITH&#x27;</span>,    MAXVALUE,    MAXVALUE),</span><br><span class="line">    part <span class="number">5</span> starting <span class="keyword">from</span> (<span class="string">&#x27;ZYZYCK&#x27;</span>,  <span class="string">&#x27;MARK&#x27;</span>,       MAXVALUE) </span><br><span class="line">             ending (MAXVALUE, MAXVALUE, MAXVALUE));</span><br><span class="line">	    </span><br><span class="line"><span class="comment">-- Drop the table.</span></span><br><span class="line"><span class="keyword">DROP</span> <span class="keyword">TABLE</span> persons;</span><br><span class="line"></span><br><span class="line"><span class="comment">-- Creating a partitioned table. This shows how a partitioned table can be</span></span><br><span class="line"><span class="comment">-- multi-dimensionally clustered to allow finer granularity of data partition</span></span><br><span class="line"><span class="comment">-- and block elimination using ORGANIZE BY clause.</span></span><br><span class="line"><span class="keyword">CREATE</span> <span class="keyword">TABLE</span> orders (YearAndMonth  <span class="type">INT</span>, Province <span class="type">CHAR</span>(<span class="number">2</span>), Country <span class="type">CHAR</span>(<span class="number">3</span>)) </span><br><span class="line">  <span class="keyword">IN</span> tbsp1, tbsp2</span><br><span class="line">    <span class="keyword">PARTITION</span> <span class="keyword">BY</span> <span class="keyword">RANGE</span> (YearAndMonth)</span><br><span class="line">      (STARTING <span class="number">9901</span> ENDING <span class="number">9904</span> <span class="keyword">EVERY</span> <span class="number">2</span>)</span><br><span class="line">         ORGANIZE <span class="keyword">BY</span> (Province);</span><br><span class="line"></span><br><span class="line"><span class="comment">-- Drop the table.</span></span><br><span class="line"><span class="keyword">DROP</span> <span class="keyword">TABLE</span> orders;</span><br><span class="line"></span><br><span class="line"><span class="comment">-- The following creates a partitioned table.</span></span><br><span class="line"><span class="comment">-- This shows how to spread the data across different database partitions  </span></span><br><span class="line"><span class="comment">-- using DISTRIBUTE BY clause. All rows with the same value of column  </span></span><br><span class="line"><span class="comment">-- &#x27;Country&#x27; will be in the same database partition. All rows with the same  </span></span><br><span class="line"><span class="comment">-- value of column &#x27;YearAndMonth&#x27; will be in the same tablespace.</span></span><br><span class="line"><span class="comment">-- For a given value of &#x27;Country&#x27; and &#x27;YearAndMonth&#x27;, all rows with the same </span></span><br><span class="line"><span class="comment">-- value &#x27;Province&#x27; will be clustered together on disk.</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">CREATE</span> <span class="keyword">TABLE</span> orders (YearAndMonth  <span class="type">INT</span>, Province <span class="type">CHAR</span>(<span class="number">2</span>), Country <span class="type">CHAR</span>(<span class="number">3</span>))</span><br><span class="line">  <span class="keyword">IN</span> tbsp1, tbsp2</span><br><span class="line">    DISTRIBUTE <span class="keyword">BY</span> HASH(Country)</span><br><span class="line">      <span class="keyword">PARTITION</span> <span class="keyword">BY</span> <span class="keyword">RANGE</span>(YearAndMonth) (STARTING <span class="number">9901</span> ENDING <span class="number">9904</span> <span class="keyword">EVERY</span> <span class="number">2</span>)</span><br><span class="line">	ORGANIZE <span class="keyword">BY</span> DIMENSIONS(Province);</span><br><span class="line"></span><br><span class="line"><span class="comment">-- Drop the table.</span></span><br><span class="line"><span class="keyword">DROP</span> <span class="keyword">TABLE</span> orders;</span><br><span class="line"></span><br><span class="line"><span class="comment">-- Drop the tablespaces.</span></span><br><span class="line"><span class="keyword">DROP</span> TABLESPACE tbsp1;</span><br><span class="line"><span class="keyword">DROP</span> TABLESPACE tbsp2;</span><br><span class="line"><span class="keyword">DROP</span> TABLESPACE tbsp3;</span><br><span class="line"><span class="keyword">DROP</span> TABLESPACE tbsp4;</span><br><span class="line"></span><br><span class="line"><span class="comment">-- Disconnect from database.</span></span><br><span class="line"><span class="keyword">CONNECT</span> RESET;</span><br><span class="line"></span><br><span class="line">TERMINATE;</span><br><span class="line"></span><br><span class="line">x</span><br><span class="line">s</span><br><span class="line">v</span><br><span class="line">p</span><br></pre></td></tr></table></figure>
      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

      
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="zh-CN">
    <link itemprop="mainEntityOfPage" href="http://example.com/2021/01/15/DB2%E6%95%B0%E6%8D%AE%E5%BA%93%E6%8A%A5%E9%94%99%E5%8E%9F%E5%9B%A0%E7%A0%81%227%22%E8%A7%A3%E5%86%B3/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/00-00-00.JPG">
      <meta itemprop="name" content="severus">
      <meta itemprop="description" content="正在享受无法回避的痛苦">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Sary.severus`s blog">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          
            <a href="/2021/01/15/DB2%E6%95%B0%E6%8D%AE%E5%BA%93%E6%8A%A5%E9%94%99%E5%8E%9F%E5%9B%A0%E7%A0%81%227%22%E8%A7%A3%E5%86%B3/" class="post-title-link" itemprop="url">未命名</a>
        </h2>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">发表于</span>

              <time title="创建时间：2021-01-15 14:28:30" itemprop="dateCreated datePublished" datetime="2021-01-15T14:28:30+08:00">2021-01-15</time>
            </span>

          

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <h1 id="Operation-not-allowed-for-reason-code-“7”-on-table-原因码-“7”的解决"><a href="#Operation-not-allowed-for-reason-code-“7”-on-table-原因码-“7”的解决" class="headerlink" title="Operation not allowed for reason code “7” on table 原因码 “7”的解决"></a><a target="_blank" rel="noopener" href="https://www.cnblogs.com/QQParadise/articles/2319757.html">Operation not allowed for reason code “7” on table 原因码 “7”的解决</a></h1><p>对表进行任何操作都不被允许，提示SQLSTATE=57016 SQLCODE=-668 ，原因码 “7”的错误：SQL0668N Operation not allowed for reason code “7” on table XXX. </p>
<p>解决方法：</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">db2 <span class="string">&quot;reorg table TABLE.NAME&quot;</span></span><br></pre></td></tr></table></figure>

      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

      
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="zh-CN">
    <link itemprop="mainEntityOfPage" href="http://example.com/2021/01/15/DB2%E6%95%B0%E6%8D%AE%E5%BA%93%E6%8A%A5%E9%94%99%E5%8E%9F%E5%9B%A0%E7%A0%81%223%22%E8%A7%A3%E5%86%B3/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/00-00-00.JPG">
      <meta itemprop="name" content="severus">
      <meta itemprop="description" content="正在享受无法回避的痛苦">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Sary.severus`s blog">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          
            <a href="/2021/01/15/DB2%E6%95%B0%E6%8D%AE%E5%BA%93%E6%8A%A5%E9%94%99%E5%8E%9F%E5%9B%A0%E7%A0%81%223%22%E8%A7%A3%E5%86%B3/" class="post-title-link" itemprop="url">未命名</a>
        </h2>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">发表于</span>

              <time title="创建时间：2021-01-15 14:28:30" itemprop="dateCreated datePublished" datetime="2021-01-15T14:28:30+08:00">2021-01-15</time>
            </span>

          

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <h2 id="DB2-Load导入数据失败之后，表被锁，提示，SQL0668N-不允许对表XX执行操作，原因码为-“3”。"><a href="#DB2-Load导入数据失败之后，表被锁，提示，SQL0668N-不允许对表XX执行操作，原因码为-“3”。" class="headerlink" title="DB2 Load导入数据失败之后，表被锁，提示，SQL0668N 不允许对表XX执行操作，原因码为 “3”。"></a>DB2 Load导入数据失败之后，表被锁，提示，SQL0668N 不允许对表XX执行操作，原因码为 “3”。</h2><ul>
<li>解决方法：</li>
</ul>
<ol>
<li>查询确认表状态</li>
</ol>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">db2 <span class="string">&quot;load query table 表名&quot;</span></span><br></pre></td></tr></table></figure>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">## 查询结果如下</span></span><br><span class="line"></span><br><span class="line">Tablestate:</span><br><span class="line">  Load Pending</span><br></pre></td></tr></table></figure>
<ol start="2">
<li>Load一个空文件，或者不存在文件来解除解锁</li>
</ol>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">db2 <span class="string">&quot;load from /dev/null of del terminate into 表名&quot;</span></span><br></pre></td></tr></table></figure>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">## 再次查询结果如下即恢复正常</span></span><br><span class="line"></span><br><span class="line">Tablestate:</span><br><span class="line">  Normal</span><br></pre></td></tr></table></figure>

      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

      
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="zh-CN">
    <link itemprop="mainEntityOfPage" href="http://example.com/2021/01/15/DB2%E8%A1%A8%E7%A9%BA%E9%97%B4%E7%8A%B6%E6%80%81%E5%BC%82%E5%B8%B80x0020%E8%A7%A3%E5%86%B3%E5%8A%9E%E6%B3%95/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/00-00-00.JPG">
      <meta itemprop="name" content="severus">
      <meta itemprop="description" content="正在享受无法回避的痛苦">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Sary.severus`s blog">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          
            <a href="/2021/01/15/DB2%E8%A1%A8%E7%A9%BA%E9%97%B4%E7%8A%B6%E6%80%81%E5%BC%82%E5%B8%B80x0020%E8%A7%A3%E5%86%B3%E5%8A%9E%E6%B3%95/" class="post-title-link" itemprop="url">未命名</a>
        </h2>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">发表于</span>

              <time title="创建时间：2021-01-15 14:28:30" itemprop="dateCreated datePublished" datetime="2021-01-15T14:28:30+08:00">2021-01-15</time>
            </span>

          

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <h1 id="DB2表空间状态异常0x0020解决办法"><a href="#DB2表空间状态异常0x0020解决办法" class="headerlink" title="DB2表空间状态异常0x0020解决办法"></a>DB2表空间状态异常0x0020解决办法</h1><p>在使用DB2导数据的时候，为了恢复自增主键，进行备份和恢复时，因为错误使用nonrecoverable这个关键字，导致数据库表空间异常等问题</p>
<h3 id="问题"><a href="#问题" class="headerlink" title="问题"></a>问题</h3><p>数据库表空间异常，通过已下命令查看表空间状态</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">db2 list tablespaces show detail</span><br></pre></td></tr></table></figure>
<p>发现表空间状态为backup pending状态，代码0x0020</p>
<h3 id="解决方法"><a href="#解决方法" class="headerlink" title="解决方法"></a>解决方法</h3><ol>
<li>切换到数据库实例用户登录数据库</li>
</ol>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">db2 connect to hzyzdb</span><br><span class="line">db2 list tablespaces show detail</span><br></pre></td></tr></table></figure>
<p>正常状态代码均为0x0000</p>
<ol start="2">
<li>如表空间状态代码为0x0020，执行以下操作</li>
</ol>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 空备异常表空间，表空间名为&#x27;HZYZSPACE01&#x27;</span></span><br><span class="line">db2 backup database HZYZDB tablespace HZYZSPACE01 online to /dev/null</span><br></pre></td></tr></table></figure>
<p>执行后需要等待一段时间，因表而异</p>
<ol start="3">
<li>验证表空间状态</li>
</ol>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">db2 list tablespaces show detail</span><br></pre></td></tr></table></figure>

      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

      
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="zh-CN">
    <link itemprop="mainEntityOfPage" href="http://example.com/2021/01/15/DB2%E8%A1%A8%E5%88%86%E5%8C%BA%E5%AE%98%E6%96%B9%E6%96%87%E6%A1%A3/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/00-00-00.JPG">
      <meta itemprop="name" content="severus">
      <meta itemprop="description" content="正在享受无法回避的痛苦">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Sary.severus`s blog">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          
            <a href="/2021/01/15/DB2%E8%A1%A8%E5%88%86%E5%8C%BA%E5%AE%98%E6%96%B9%E6%96%87%E6%A1%A3/" class="post-title-link" itemprop="url">未命名</a>
        </h2>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">发表于</span>

              <time title="创建时间：2021-01-15 14:28:30" itemprop="dateCreated datePublished" datetime="2021-01-15T14:28:30+08:00">2021-01-15</time>
            </span>

          

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <h1 id="DB2-9-表分区"><a href="#DB2-9-表分区" class="headerlink" title="DB2 9 表分区"></a>DB2 9 表分区</h1><p>改进大型数据库的管理</p>
<p>Paul Read, Richard Hewitt, Paul Read, 和 Richard Hewitt<br>2007 年 10 月 29 日发布</p>
<h2 id="开始之前"><a href="#开始之前" class="headerlink" title="开始之前"></a>开始之前</h2><p><code>CREATE TABLE</code> 语句的 PARTITION BY 子句指定了表数据的分区。该定义中使用的列被称为表分区键列。</p>
<p>关于该特性的详细说明可参见 “<a target="_blank" rel="noopener" href="http://www.ibm.com/developerworks/db2/library/techarticle/dm-0605ahuja2/">Table partitioning in DB2 9</a>”（developerWorks，2006 年 5 月）。</p>
<p>表分区特性提供以下收益：</p>
<ul>
<li>表数据可轻易实现转入和转出</li>
<li>对大型表的管理更加轻松</li>
<li>灵活的索引放置</li>
<li>更高的业务智能样式查询的性能</li>
</ul>
<h3 id="关于本教程"><a href="#关于本教程" class="headerlink" title="关于本教程"></a>关于本教程</h3><p>本教程中的练习将引领您使用表分区特性，并演示了表数据的转入转出、更轻松的大型表管理、灵活的索引放置和对业务智能样式查询的性能改善。</p>
<p>这些练习旨在演示上述各领域内的一个或多个任务。</p>
<h3 id="目标"><a href="#目标" class="headerlink" title="目标"></a>目标</h3><p>本教程的目标是在以下方面探究 DB2 9 范围分区的特性和优点：</p>
<ul>
<li>创建范围分区表</li>
<li>分区的转入和转出</li>
<li>分区表的管理</li>
<li>索引管理和放置</li>
</ul>
<h3 id="先决条件"><a href="#先决条件" class="headerlink" title="先决条件"></a>先决条件</h3><p>本教程的目标读者是那些技能和经验刚刚迈入中级水平的 DB2 专业人员。要学习本教程，您应该熟悉 DB2 命令行、DB2 管理工具的使用，还应具备 SQL 实践经验。</p>
<h4 id="系统需求"><a href="#系统需求" class="headerlink" title="系统需求"></a>系统需求</h4><p>要运行本教程的示例，需要具备以下条件：</p>
<ul>
<li><a target="_blank" rel="noopener" href="http://www-306.ibm.com/software/data/db2/express/download.html">DB2 9 Data Server</a></li>
<li>Microsoft® Windows® 2000 或更高版本，以及一个具有管理员权限的帐户，或具有根访问权限的 Linux®（<a target="_blank" rel="noopener" href="http://www-306.ibm.com/software/data/db2/linux/validate/">验证版</a>）。</li>
<li>确保系统中的 Java Runtime Environment 是 1.4.2 或更高版本。</li>
<li>参考 DB2 9 <a target="_blank" rel="noopener" href="http://www-306.ibm.com/software/data/db2/9/sysreqs.html">系统需求页面</a> 确保您的硬件符合要求。</li>
</ul>
<p>可通过上面的链接获取 DB2 9 Express C。关于安装 DB2 的步骤请参考 “<a target="_blank" rel="noopener" href="http://www.ibm.com/developerworks/cn/views/db2/tutorials.jsp?cv_doc_id=110099">DB2 XML 评估指南</a>”（developerWorks，2006 年 6 月）。若未改动 DB2 的配置，安装后 DB2 将自动启动。</p>
<p>使用 partition.zip 文件提供的示例脚本和数据演示本教程的概念。将其内容解压缩到 scripts 子目录（C:\scripts 或 home/userid/scripts）。本教程中将该目录简称为 stmm_scripts。教程假设您使用的是 DB2 默认安装目录，并且所有的 DB2 练习都通过一个数据库管理员 ID 执行。</p>
<h2 id="创建分区表"><a href="#创建分区表" class="headerlink" title="创建分区表"></a>创建分区表</h2><p>这个实验将探讨创建分区表、将数据载入分区表以及使用 <code>describe</code> 命令来说明表范围的方法：</p>
<ol>
<li>您将登录并为所有的练习设置基本环境。</li>
<li>您将创建不同格式的分区表并加载数据。</li>
<li>您将使用 DB2 命令和 SQL 查看结果。</li>
<li>将对 DB2 9 表范围分区进行概述。</li>
</ol>
<h4 id="登录和基本指令"><a href="#登录和基本指令" class="headerlink" title="登录和基本指令"></a>登录和基本指令</h4><h5 id="图-1-基本设置"><a href="#图-1-基本设置" class="headerlink" title="图 1. 基本设置"></a>图 1. 基本设置</h5><p><img src="https://www.ibm.com/developerworks/cn/education/data/dm0612read/s5.jpg" alt="命令窗口"></p>
<ol>
<li><p>登录到您的机器，如图 1 所示，使用 db2inst1。</p>
</li>
<li><p>打开终端窗口（Linux）或 DB2 命令窗口（windows）。</p>
</li>
<li><p>切换到 scripts 子目录。</p>
<h5 id="清单-1-切换目录"><a href="#清单-1-切换目录" class="headerlink" title="清单 1. 切换目录"></a>清单 1. 切换目录</h5><p> <code>cd /scripts or ``cd c:\scripts</code></p>
</li>
<li><p>使用</p>
</li>
</ol>
<pre><code><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">db2start</span><br></pre></td></tr></table></figure>


命令启动 DB2，并连接到 SAMPLE 数据库。

##### 清单 2. StartDB2

`db2start` `db2 connect to SAMPLE`</code></pre>
<h4 id="创建基本分区表"><a href="#创建基本分区表" class="headerlink" title="创建基本分区表"></a>创建基本分区表</h4><p>这一节将介绍分区表的基本创建和加载。您将创建不同格式的表、验证创建结果、加载数据并对表进行查询。</p>
<ol>
<li><p>使用如下的数据定义语言（DDL）创建具有四个范围的 LINEITEM 表：</p>
<h5 id="清单-3-创建表"><a href="#清单-3-创建表" class="headerlink" title="清单 3. 创建表"></a>清单 3. 创建表</h5><p> <code>CREATE TABLE LINEITEM ``( l_orderkey     DECIMAL(10,0) NOT NULL,`` ``l_partkey     INTEGER,`` ``l_suppkey     INTEGER,`` ``l_linenumber    INTEGER,`` ``l_quantity     DECIMAL(12,2),`` ``l_extendedprice  DECIMAL(12,2),`` ``l_discount     DECIMAL(12,2),`` ``l_tax       DECIMAL(12,2),`` ``l_returnflag    CHAR(1),`` ``l_linestatus    CHAR(1),`` ``l_shipdate     DATE,`` ``l_commitdate    DATE,`` ``l_receiptdate   DATE,`` ``l_shipinstruct   CHAR(25),`` ``l_shipmode     CHAR(10),`` ``l_comment     VARCHAR(44))`` ``PARTITION BY RANGE(l_shipdate)``( STARTING &#39;1/1/1992&#39; ENDING &#39;30/06/1992&#39;,`` ``STARTING &#39;1/7/1992&#39; ENDING &#39;31/12/1992&#39;,`` ``STARTING &#39;1/1/1993&#39; ENDING &#39;30/6/1993&#39;,`` ``STARTING &#39;1/7/1993&#39; ENDING &#39;31/12/1993&#39;)</code></p>
<p> 创建该表的 SQL 语句位于 EX1-6.sql 文件中，可使用如下命令运行该文件：</p>
<h5 id="清单-4-运行-EX1-6"><a href="#清单-4-运行-EX1-6" class="headerlink" title="清单 4. 运行 EX1-6"></a>清单 4. 运行 EX1-6</h5><p> <code>db2 –vtf EX1-6.sql</code></p>
</li>
<li><p>使用下面的命令说明为 LINEITEM 表创建的分区的范围：</p>
<h5 id="清单-5-说明"><a href="#清单-5-说明" class="headerlink" title="清单 5. 说明"></a>清单 5. 说明</h5><p> <code>db2 describe data partitions for table LINEITEM</code></p>
<h5 id="图-2-说明为-LINEITEM-表创建的分区范围"><a href="#图-2-说明为-LINEITEM-表创建的分区范围" class="headerlink" title="图 2. 说明为 LINEITEM 表创建的分区范围"></a>图 2. 说明为 LINEITEM 表创建的分区范围</h5></li>
</ol>
<pre><code>注意

：创建了四个数据分区。其中的范围包括边界值。</code></pre>
<ol start="3">
<li><p>将数据导入到 LINEITEM 表。该操作的导入命令位于 EX1-8.sql 文件中，可使用如下命令运行：</p>
<h5 id="清单-6-带有拒绝的加载"><a href="#清单-6-带有拒绝的加载" class="headerlink" title="清单 6. 带有拒绝的加载"></a>清单 6. 带有拒绝的加载</h5><p> <code>db2 –vtf EX1-8.sql</code></p>
<h5 id="图-3-将数据导入到-LINEITEM-表"><a href="#图-3-将数据导入到-LINEITEM-表" class="headerlink" title="图 3. 将数据导入到 LINEITEM 表"></a>图 3. 将数据导入到 LINEITEM 表</h5></li>
</ol>
<pre><code>注意

：导入时拒绝了 729 行数据，这是因为它们不具有位于当前 LINEITEM 表的数据分区定义范围内的 l_shipdate。</code></pre>
<ol start="4">
<li><p>标量函数可用于显示行所属的数据分区号（datapartitionnum）。执行以下示例 SQL 查看标量函数的输出：</p>
<h5 id="清单-7-查询-匹配日期的分区"><a href="#清单-7-查询-匹配日期的分区" class="headerlink" title="清单 7. 查询 - 匹配日期的分区"></a>清单 7. 查询 - 匹配日期的分区</h5><p> <code>db2 “select datapartitionnum(l_shipdate) as PartitionId, l_shipdate from lineitem ``    ``where l_shipdate between ’01/06/1992’ and ‘31/07/1992’ ``    ``order by l_shipdate”</code></p>
<h5 id="图-4-标量函数的输出"><a href="#图-4-标量函数的输出" class="headerlink" title="图 4. 标量函数的输出"></a>图 4. 标量函数的输出</h5></li>
</ol>
<pre><code>注意

：标量函数（datapartitionnum）返回的值和



<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">describe</span><br></pre></td></tr></table></figure>


命令返回的是同一个 PartitionId。该语句的子句间使用的谓词范围超出了 PartitionId 0 和 PartitionId 1 的边界</code></pre>
<h4 id="具有全部范围的分区表"><a href="#具有全部范围的分区表" class="headerlink" title="具有全部范围的分区表"></a>具有全部范围的分区表</h4><ol>
<li><p>创建具有两个额外数据分区的新 LINEITEM 表，其中一个分区用来捕获低于当前范围的值，另一个分区用来捕获高于当前范围的值。首先使用下面的命令删除现有的 LINEITEM 分区表：</p>
<h5 id="清单-8-删除表"><a href="#清单-8-删除表" class="headerlink" title="清单 8. 删除表"></a>清单 8. 删除表</h5><p> <code>db2 drop TABLE LINEITEM</code></p>
<p> 然后使用如下 DDL 创建 LINEITEM 表的新版本：</p>
<h5 id="清单-9-创建表"><a href="#清单-9-创建表" class="headerlink" title="清单 9. 创建表"></a>清单 9. 创建表</h5><p> <code>CREATE TABLE LINEITEM ``( l_orderkey     DECIMAL(10,0) NOT NULL,`` ``l_partkey     INTEGER,`` ``l_suppkey     INTEGER,`` ``l_linenumber    INTEGER,`` ``l_quantity     DECIMAL(12,2),`` ``l_extendedprice  DECIMAL(12,2),`` ``l_discount     DECIMAL(12,2),`` ``l_tax       DECIMAL(12,2),`` ``l_returnflag    CHAR(1),`` ``l_linestatus    CHAR(1),`` ``l_shipdate     DATE,`` ``l_commitdate    DATE,`` ``l_receiptdate   DATE,`` ``l_shipinstruct   CHAR(25),`` ``l_shipmode     CHAR(10),`` ``l_comment     VARCHAR(44))`` ``PARTITION BY RANGE(l_shipdate)``( STARTING MINVALUE,`` ``STARTING &#39;1/1/1992&#39; ENDING &#39;30/06/1992&#39;,`` ``STARTING &#39;1/7/1992&#39; ENDING &#39;31/12/1992&#39;,`` ``STARTING &#39;1/1/1993&#39; ENDING &#39;30/6/1993&#39;,`` ``STARTING &#39;1/7/1993&#39; ENDING &#39;31/12/1993&#39;,`` ``ENDING MAXVALUE)</code></p>
<p> 创建该表的 SQL 位于 EX1-10.sql 文件中，可使用下列命令运行：</p>
<h5 id="清单-10-运行-EX1-10"><a href="#清单-10-运行-EX1-10" class="headerlink" title="清单 10. 运行 EX1-10"></a>清单 10. 运行 EX1-10</h5><p> <code>db2 –vtf EX1-10.sql</code></p>
</li>
<li><p>使用下面的命令说明为 LINEITEM 表创建的分区范围。</p>
<h5 id="清单-11-说明"><a href="#清单-11-说明" class="headerlink" title="清单 11. 说明"></a>清单 11. 说明</h5><p> <code>db2 describe data partitions for table LINEITEM</code></p>
<h5 id="图-5-说明为-LINEITEM-表创建的分区范围"><a href="#图-5-说明为-LINEITEM-表创建的分区范围" class="headerlink" title="图 5. 说明为 LINEITEM 表创建的分区范围"></a>图 5. 说明为 LINEITEM 表创建的分区范围</h5></li>
</ol>
<pre><code>注意

：新的 MINVALUE 范围具有一个最高值，该值和下一个数据分区开始部分的值相等，但它并不包含该值。MAXVALUE 范围具有一个最低值，该值和前一个范围结束部分的值相等，但它不包含该值。这将创建一个无间隙的连续范围。</code></pre>
<ol start="3">
<li><p>将数据导入到 LINEITEM 表中。该操作的导入命令位于 EX1-8.sql 文件中，可使用下面的命令运行该文件：</p>
<h5 id="清单-12-全面加载"><a href="#清单-12-全面加载" class="headerlink" title="清单 12. 全面加载"></a>清单 12. 全面加载</h5><p> <code>db2 –vtf EX1-8.sql</code></p>
<h5 id="图-6-将数据导入到-LINEITEM-表中"><a href="#图-6-将数据导入到-LINEITEM-表中" class="headerlink" title="图 6. 将数据导入到 LINEITEM 表中"></a>图 6. 将数据导入到 LINEITEM 表中</h5></li>
</ol>
<h4 id="具有生成范围的分区表"><a href="#具有生成范围的分区表" class="headerlink" title="具有生成范围的分区表"></a>具有生成范围的分区表</h4><ol>
<li><p>创建一个新 LINEITEM 表，它具有从 1992 年 1 月 1 日到 1998 年 12 月 31 日按月划分的数据分区生成范围。同样，添加 minvalue 和 maxvalue 范围来存放具有超过此范围的 l_shipdate 的值的行。首先使用以下命令删除现有的 LINEITEM 分区表：</p>
<h5 id="清单-13-删除表"><a href="#清单-13-删除表" class="headerlink" title="清单 13. 删除表"></a>清单 13. 删除表</h5><p> <code>db2 drop TABLE LINEITEM</code></p>
<p> 然后使用如下 DDL 创建 LINEITEM 表的新版本：</p>
<h5 id="清单-14-创建表"><a href="#清单-14-创建表" class="headerlink" title="清单 14. 创建表"></a>清单 14. 创建表</h5><p> <code>CREATE TABLE lineitem``(l_orderkey      DECIMAL(10,0) NOT NULL,`` ``l_cpartkey   INTEGER,`` ``l_suppkey    INTEGER,`` ``l_linenumber  INTEGER,`` ``l_quantity   DECIMAL(12,2),`` ``l_extendedprice DECIMAL(12,2),`` ``l_discount   DECIMAL(12,2),`` ``l_tax      DECIMAL(12,2),`` ``l_returnflag  CHAR(1),`` ``l_linestatus  CHAR(1),`` ``l_shipdate   DATE,`` ``l_commitdate  DATE,`` ``l_receiptdate  DATE,`` ``l_shipinstruct CHAR(25),`` ``l_shipmode   CHAR(10),`` ``l_comment    VARCHAR(44))`` ``PARTITION BY RANGE(l_shipdate)`` ``(STARTING MINVALUE,`` ``STARTING &#39;1/1/1992&#39; ENDING &#39;31/12/1998&#39; ``        ``EVERY 1 MONTH,`` ``ENDING MAXVALUE);</code></p>
<p> 创建该表的 SQL 位于 EX1-13.sql 文件中，可使用下面的命令运行该文件：</p>
<h5 id="清单-15-运行-EX1-13"><a href="#清单-15-运行-EX1-13" class="headerlink" title="清单 15. 运行 EX1-13"></a>清单 15. 运行 EX1-13</h5><p> <code>db2 –vtf EX1-13.sql</code></p>
</li>
<li><p>使用如下命令来说明为 LINEITEM 表创建的分区范围：</p>
<h5 id="清单-16-说明"><a href="#清单-16-说明" class="headerlink" title="清单 16. 说明"></a>清单 16. 说明</h5><p> <code>db2 describe data partitions for table LINEITEM</code></p>
<h5 id="图-7-说明为-LINEITEM-表创建的分区范围"><a href="#图-7-说明为-LINEITEM-表创建的分区范围" class="headerlink" title="图 7. 说明为 LINEITEM 表创建的分区范围"></a>图 7. 说明为 LINEITEM 表创建的分区范围</h5></li>
</ol>
<pre><code>注意

：创建了 86 个数据分区，但是没有包括这些范围的最高值，因为这些最高值将和之后的数据分区的最低值重叠。</code></pre>
<ol start="3">
<li><p>将数据导入到 LINEITEM 表。此操作的导入命令位于 EX1-8.sql 文件中，可使用下面的命令运行该文件：</p>
<h5 id="清单-17-加载并生成"><a href="#清单-17-加载并生成" class="headerlink" title="清单 17. 加载并生成"></a>清单 17. 加载并生成</h5><p> <code>db2 –vtf EX1-8.sql</code></p>
<h5 id="图-8-将数据导入到-LINEITEM-表"><a href="#图-8-将数据导入到-LINEITEM-表" class="headerlink" title="图 8. 将数据导入到 LINEITEM 表"></a>图 8. 将数据导入到 LINEITEM 表</h5></li>
</ol>
<ol start="4">
<li><p>使用下面的 SQL 来验证 LINEITEM 表每一个数据分区的行数：</p>
<h5 id="清单-18-查询数据"><a href="#清单-18-查询数据" class="headerlink" title="清单 18. 查询数据"></a>清单 18. 查询数据</h5><p> <code>db2 “select year(l_shipdate) as year, month(l_shipdate) as month, ``count(*) as count from lineitem`` ``group by year(l_shipdate), month(l_shipdate)`` ``order by 1, 2”</code></p>
<p> 使用以下的 SQL 语句验证 LINEITEM 表的每一个数据分区的行数：</p>
<h5 id="清单-19-查询数据脚本"><a href="#清单-19-查询数据脚本" class="headerlink" title="清单 19. 查询数据脚本"></a>清单 19. 查询数据脚本</h5><p> <code>db2 –vtf EX1-16.sql</code></p>
<h5 id="图-9-检验行数"><a href="#图-9-检验行数" class="headerlink" title="图 9. 检验行数"></a>图 9. 检验行数</h5></li>
</ol>
<pre><code>注意

：执行加载操作后，86 个范围中有 82 个范围包含一个或多个行。</code></pre>
<h2 id="放置分区表"><a href="#放置分区表" class="headerlink" title="放置分区表"></a>放置分区表</h2><p>该实验探讨放置分区表以及使用 <code>describe</code> 命令说明表内的范围和放置情况的方法：</p>
<ol>
<li>您将为数据放置练习创建新的表空间。</li>
<li>你将创建不同格式的分区表。</li>
<li>您将使用 db2 命令和 SQL 查看结果。</li>
</ol>
<h4 id="基本环境设置"><a href="#基本环境设置" class="headerlink" title="基本环境设置"></a>基本环境设置</h4><ol>
<li>使用</li>
</ol>
<pre><code><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">describe data partitions</span><br></pre></td></tr></table></figure>


命令以及



<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">show detail</span><br></pre></td></tr></table></figure>


方法来显示表空间的分区放置。

##### 清单 20. 创建表

`db2 describe data partitions for table LINEITEM show detail`

##### 图 10. 表空间的分区放置



注意

：TableSpID 列给出了包含分区的表空间的 ID 号。在本例中，TableSpID 是 ‘3’。</code></pre>
<ol start="2">
<li>使用</li>
</ol>
<pre><code><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">list tablespaces</span><br></pre></td></tr></table></figure>


命令标识与 TableSpId 相关联的表空间。

##### 清单 21. 说明

`db2 list tablespaces`

##### 图 11. 标识表空间



注意

：相应值为 ‘2’ 的 TableSpID 是 USERSPACE1 或默认的表空间。</code></pre>
<ol start="3">
<li><p>现在将创建五个表空间来说明不同的放置选项。使用如下命令：</p>
<h5 id="清单-22-说明"><a href="#清单-22-说明" class="headerlink" title="清单 22. 说明"></a>清单 22. 说明</h5><p> <code>db2 create tablespace dms_d1 managed by database using (file &#39;c:\ts1&#39; 10000);``db2 create tablespace dms_d2 managed by database using (file &#39;c:\ts2&#39; 10000);``db2 create tablespace dms_d3 managed by database using (file &#39;c:\ts3&#39; 10000);``db2 create tablespace dms_d4 managed by database using (file &#39;c:\ts4&#39; 10000);``db2 create tablespace dms_i1 managed by database using (file &#39;c:\ts5&#39; 10000);</code></p>
<p> 创建该表空间的 SQL 位于 EX2-3.sql 文件中，可使用下面的命令运行该文件：</p>
<h5 id="清单-23-查询数据脚本"><a href="#清单-23-查询数据脚本" class="headerlink" title="清单 23. 查询数据脚本"></a>清单 23. 查询数据脚本</h5><p> <code>db2 –vtf EX2-3.sql</code></p>
</li>
<li><p>创建一个新的 LINEITEM 表，具有位于 dms_d1 和 dms_d2 表空间的生成分区集。首先，使用如下命令删除现有的 LINEITEM 分区表：</p>
<h5 id="清单-24-删除表"><a href="#清单-24-删除表" class="headerlink" title="清单 24. 删除表"></a>清单 24. 删除表</h5><p> <code>db2 drop TABLE LINEITEM</code></p>
<p> 然后，使用下面的 DDL 创建 LINEITEM 表的新版本：</p>
<h5 id="清单-25-创建表"><a href="#清单-25-创建表" class="headerlink" title="清单 25. 创建表"></a>清单 25. 创建表</h5><p> <code>CREATE TABLE LINEITEM``(l_orderkey   DECIMAL(10,0) NOT NULL,`` ``l_partkey    INTEGER,`` ``l_suppkey    INTEGER,`` ``l_linenumber  INTEGER,`` ``l_quantity   DECIMAL(12,2),`` ``l_extendedprice DECIMAL(12,2),`` ``l_discount   DECIMAL(12,2),`` ``l_tax      DECIMAL(12,2),`` ``l_returnflag  CHAR(1),`` ``l_linestatus  CHAR(1),`` ``l_shipdate   DATE,`` ``l_commitdate  DATE,`` ``l_receiptdate  DATE,`` ``l_shipinstruct CHAR(25),`` ``l_shipmode   CHAR(10),`` ``l_comment    VARCHAR(44))`` ``IN DMS_D1, DMS_D2`` ``PARTITION BY RANGE(l_shipdate)``(STARTING MINVALUE,`` ``STARTING &#39;1/1/1992&#39; ``   ``ENDING &#39;31/12/1998&#39; EVERY 1 MONTH,`` ``ENDING MAXVALUE);</code></p>
<p> 创建该表的 SQL 位于 EX2-4.sql 文件中，可使用下面的命令运行该文件：</p>
<h5 id="清单-26-运行-EX2-4"><a href="#清单-26-运行-EX2-4" class="headerlink" title="清单 26. 运行 EX2-4"></a>清单 26. 运行 EX2-4</h5><p> <code>db2 –vtf EX2-4.sql</code></p>
</li>
<li><p>使用下面的命令说明为 LINEITEM 表创建的分区范围：</p>
<h5 id="清单-27-说明"><a href="#清单-27-说明" class="headerlink" title="清单 27. 说明"></a>清单 27. 说明</h5><p> <code>db2 describe data partitions for table LINEITEM show detail</code></p>
<h5 id="图-12-说明为-LINEITEM-表创建的分区范围"><a href="#图-12-说明为-LINEITEM-表创建的分区范围" class="headerlink" title="图 12. 说明为 LINEITEM 表创建的分区范围"></a>图 12. 说明为 LINEITEM 表创建的分区范围</h5></li>
</ol>
<pre><code>##### 图 13. 分区



注意

：TableSpID 列给出了包含分区的表空间的 ID 号。在本例中，TableSpID 为 4（对应于 DMS_D1）或 5（对应于 DMS_D2）。本例中将生成的分区依次分配给指定的表空间。</code></pre>
<h4 id="分区的显式放置"><a href="#分区的显式放置" class="headerlink" title="分区的显式放置"></a>分区的显式放置</h4><ol>
<li><p>创建一个具有四个数据分区的新 LINEITEM 表，每一个数据分区被显式地放在表空间中。首先使用如下命令删除现有的 LINEITEM 表：</p>
<h5 id="清单-28-删除表"><a href="#清单-28-删除表" class="headerlink" title="清单 28. 删除表"></a>清单 28. 删除表</h5><p> <code>db2 drop TABLE LINEITEM</code></p>
<p> 然后使用下面的 DDL 创建 LINEITEM 表的新版本：</p>
<h5 id="清单-29-创建表"><a href="#清单-29-创建表" class="headerlink" title="清单 29. 创建表"></a>清单 29. 创建表</h5><p> <code>CREATE TABLE LINEITEM`` ``(l_orderkey     DECIMAL(10,0) NOT NULL,`` ``l_partkey      INTEGER,`` ``l_suppkey      INTEGER,`` ``l_linenumber    INTEGER,`` ``l_quantity     DECIMAL(12,2),`` ``l_extendedprice   DECIMAL(12,2),`` ``l_discount     DECIMAL(12,2),`` ``l_tax        DECIMAL(12,2),`` ``l_returnflag    CHAR(1),`` ``l_linestatus    CHAR(1),`` ``l_shipdate     DATE,`` ``l_commitdate    DATE,`` ``l_receiptdate    DATE,`` ``l_shipinstruct   CHAR(25),`` ``l_shipmode     CHAR(10),`` ``l_comment      VARCHAR(44))`` ``PARTITION BY RANGE(l_shipdate)`` ``( STARTING MINVALUE IN DMS_D1,``  ``STARTING &#39;1/1/1992&#39; ENDING &#39;31/12/1992&#39; IN DMS_D2,``  ``STARTING &#39;1/1/1993&#39; ENDING &#39;31/12/1993&#39; IN DMS_D3,``  ``ENDING MAXVALUE IN DMS_D4 );</code></p>
<p> 创建表的 SQL 位于 EX2-6.sql 文件中，可使用下面的命令运行该文件：</p>
<h5 id="清单-30-运行-EX2-6"><a href="#清单-30-运行-EX2-6" class="headerlink" title="清单 30. 运行 EX2-6"></a>清单 30. 运行 EX2-6</h5><p> <code>db2 –vtf EX2-6.sql</code></p>
</li>
<li><p>使用下面的命令说明为 LINEITEM 表创建的分区范围：</p>
<h5 id="清单-31-说明"><a href="#清单-31-说明" class="headerlink" title="清单 31. 说明"></a>清单 31. 说明</h5><p> <code>db2 describe data partitions for table LINEITEM show detail</code></p>
<h5 id="图-14-说明为-LINEITEM-表创建的分区范围"><a href="#图-14-说明为-LINEITEM-表创建的分区范围" class="headerlink" title="图 14. 说明为 LINEITEM 表创建的分区范围"></a>图 14. 说明为 LINEITEM 表创建的分区范围</h5></li>
</ol>
<pre><code>注意

：在本例中，每一个分区被放置在一个不同的 TableSpID 中，这个 TableSpID 和创建表的 DDL 中指定的表空间是相对应的。</code></pre>
<ol start="3">
<li><p>创建一个具有四个数据分区的 LINEITEM 表，每一个数据分区被显式地放在表空间并且索引被放在表空间 DMS_I1 中。 在这一步中，将引入命名分区的概念，而不是使用默认的生成名称。 首先，使用下面的命令删除现有的 LINEITEM 分区表：</p>
<h5 id="清单-32-删除表"><a href="#清单-32-删除表" class="headerlink" title="清单 32. 删除表"></a>清单 32. 删除表</h5><p> <code>db2 drop TABLE LINEITEM</code></p>
<p> 然后，使用以下的 DDL 创建 LINEITEM 表的新版本：</p>
<h5 id="清单-33-创建表"><a href="#清单-33-创建表" class="headerlink" title="清单 33. 创建表"></a>清单 33. 创建表</h5><p> <code>CREATE TABLE LINEITEM``(l_orderkey      DECIMAL(10,0) NOT NULL,`` ``l_partkey      INTEGER,`` ``l_suppkey      INTEGER,`` ``l_linenumber     INTEGER,`` ``l_quantity      DECIMAL(12,2),`` ``l_extendedprice   DECIMAL(12,2),`` ``l_discount      DECIMAL(12,2),`` ``l_tax        DECIMAL(12,2),`` ``l_returnflag     CHAR(1),`` ``l_linestatus     CHAR(1),`` ``l_shipdate      DATE,`` ``l_commitdate     DATE,`` ``l_receiptdate    DATE,`` ``l_shipinstruct    CHAR(25),`` ``l_shipmode      CHAR(10),`` ``l_comment      VARCHAR(44))``INDEX IN DMS_I1``PARTITION BY RANGE(l_shipdate)``( PART JAN1992 STARTING &#39;1/1/1992&#39; ENDING &#39;30/6/1992&#39; IN DMS_D1,`` ``PART JULY1992 STARTING &#39;1/7/1992&#39; ENDING &#39;31/12/1992&#39; IN DMS_D2,`` ``PART JAN 1993 STARTING &#39;1/1/1993&#39; ENDING &#39;30/6/1993&#39; IN DMS_D3,`` ``PART JULY1993 STARTING &#39;1/7/1993&#39; ENDING &#39;31/12/1993&#39; IN DMS_D4);</code></p>
<p> 创建表的 SQL 位于 EX2-8.sql 文件中，可使用下面的命令运行该文件：</p>
<h5 id="清单-34-运行-EX2-8"><a href="#清单-34-运行-EX2-8" class="headerlink" title="清单 34. 运行 EX2-8"></a>清单 34. 运行 EX2-8</h5><p> <code>db2 –vtf EX2-8.sql</code></p>
</li>
<li><p>在 LINEITEM 表中创建一个索引，并将它放置在表空间 DMS_I1 中。使用如下 SQL：</p>
<h5 id="清单-35-索引"><a href="#清单-35-索引" class="headerlink" title="清单 35. 索引"></a>清单 35. 索引</h5><p> <code>db2 “create index I_LINEITEM on LINEITEM(L_SHIPDATE) in DMS_I1”</code></p>
</li>
<li><p>使用下面的 SQL 检验和该表相关联的索引的位置：</p>
<h5 id="清单-36-说明"><a href="#清单-36-说明" class="headerlink" title="清单 36. 说明"></a>清单 36. 说明</h5><p> <code>db2 “select tabname, index_tbspace from syscat.tables where tabname = ‘LINEITEM’”</code></p>
<h5 id="图-15-检验索引的位置"><a href="#图-15-检验索引的位置" class="headerlink" title="图 15. 检验索引的位置"></a>图 15. 检验索引的位置</h5></li>
</ol>
<pre><code>注意

：索引空间是 DMS_I1。如果没有为分区表指定表空间，那么默认情况下索引位于连接着的第一个表空间。 在 CREATE TABLE 中定义表空间是很好的实践。然而，无论您是否在创建表语句 ID 中指定索引表空间，这并不限制您将来放置索引的位置。您可以在 CREATE INDEX 语句本身显式地指定索引表空间。 同一分区表的不同索引可以放置在不同的表空间。</code></pre>
<h2 id="管理分区表"><a href="#管理分区表" class="headerlink" title="管理分区表"></a>管理分区表</h2><p>这个实验将查看如何管理和操作分区表：</p>
<ol>
<li>您将添加和删除分区。</li>
<li>您将执行对分区的转入转出操作。</li>
<li>在执行查看操作时将使用 DB2 命令和 SQL。</li>
</ol>
<h4 id="使用现有的表添加一个新的分区"><a href="#使用现有的表添加一个新的分区" class="headerlink" title="使用现有的表添加一个新的分区"></a>使用现有的表添加一个新的分区</h4><ol>
<li><p>将数据导入 LINEITEM 表。创建表空间的 SQL 位于 EX3-1.sql 文件中，可使用下面的命令运行该文件：</p>
<h5 id="清单-37-导入数据"><a href="#清单-37-导入数据" class="headerlink" title="清单 37. 导入数据"></a>清单 37. 导入数据</h5><p> <code>db2 –vtf EX3-1.sql</code></p>
<h5 id="图-16-将数据导入到-LINEITEM-表"><a href="#图-16-将数据导入到-LINEITEM-表" class="headerlink" title="图 16. 将数据导入到 LINEITEM 表"></a>图 16. 将数据导入到 LINEITEM 表</h5></li>
</ol>
<pre><code>注意

：分区表中的记录数，以及将进行连接和分离的记录数对于说明数据库中的数据何时可用非常重要。</code></pre>
<ol start="2">
<li><p>创建一个名为 NP_LINEITEM 的新表。脚本 EX3-2.sql 创建一个具有 87 行的新表 NP_LINEITEM:</p>
<h5 id="清单-38-新分区"><a href="#清单-38-新分区" class="headerlink" title="清单 38. 新分区"></a>清单 38. 新分区</h5><p> <code>db2 –vtf EX3-2.sql</code></p>
<h5 id="图-17-将数据导入到-NP-LINEITEM-表"><a href="#图-17-将数据导入到-NP-LINEITEM-表" class="headerlink" title="图 17. 将数据导入到 NP_LINEITEM 表"></a>图 17. 将数据导入到 NP_LINEITEM 表</h5></li>
</ol>
<ol start="3">
<li><p>使用下面的命令说明为 LINEITEM 表创建的分区范围：</p>
<h5 id="清单-39-说明"><a href="#清单-39-说明" class="headerlink" title="清单 39. 说明"></a>清单 39. 说明</h5><p> <code>db2 describe data partitions for table LINEITEM show detail</code></p>
<h5 id="图-18-LINEITEM-表的分区"><a href="#图-18-LINEITEM-表的分区" class="headerlink" title="图 18. LINEITEM 表的分区"></a>图 18. LINEITEM 表的分区</h5></li>
</ol>
<pre><code>注意

：LINEITEM 表目前包含 4 个数据分区。</code></pre>
<ol start="4">
<li>使用</li>
</ol>
<pre><code><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">Alter</span><br></pre></td></tr></table></figure>


语句将一个新的分区连接（转入）到现有的 LINEITEM 表。

##### 清单 40. 新分区

`ALTER TABLE LINEITEM ATTACH PARTITION JAN1994 ``STARTING &#39;1/1/1994&#39; ENDING &#39;30/6/1994&#39;``FROM NP_LINEITEM`

可以使用以下命令运行脚本 EX3-4：

##### 清单 41. 新分区

`db2 –vtf EX3-4.sql`

##### 图 19. 脚本 EX3-4



注意

：LINEITEM 表被置于 SET INTEGRITY PENDING 状态。</code></pre>
<ol start="5">
<li>连接后，使用</li>
</ol>
<pre><code><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">describe data partitions</span><br></pre></td></tr></table></figure>


命令来说明为 LINEITEM 表创建的分区范围：

##### 清单 42. 说明

`db2 describe data partitions for table LINEITEM show detail`

##### 图 20. LINEITEM 表的分区



注意

：新数据分区（JAN1994）PartitionId 4 现在连接到了 LINEITEM 表。然而连接的分区的 AccessMode 值为 ‘N’ 并且 Status 的值为 ‘A’。 AccessMode 可能的值有：

- D = 没有数据移动
- F = 完全访问
- N = 不访问
- R = 只读访问

Status 可能的值有：

- A = 数据分区是新连接的
- D = 数据分区是分离的
- I = 只有在执行异步索引清除时才对条目位于目录的分离的数据分区进行维护；当所有引用分离数据分区的索引记录删除后，将删除 STATUS 值为 ‘I’ 的行。
- Empty string = 数据分区是可见的（普通状态）</code></pre>
<ol start="6">
<li>运行两个</li>
</ol>
<pre><code><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">select count</span><br></pre></td></tr></table></figure>


语句来检查连接语句涉及的两个表中数据的可用性。

##### 清单 43. Count Lineitem

`db2 “select count(*) from lineitem”`

##### 图 21. select count 语句的结果



注意

：LINEITEM 表最初的分区是可用的，但是 PartitionId 4 中的新数据仍不可见。

##### 清单 44. Count np-lineitem

`db2 “select count(*) from np_lineitem”`

##### 图 22. select count 语句的结果



注意

：NP_LINEITEM 表现在是一个未定义的对象，在 LINEITEM 表内只能将其作为一个分区使用。</code></pre>
<ol start="7">
<li><p>创建一个异常表并与 SET INTEGRITY 语句结合使用。执行该操作的 DDL 位于 EX3-7.sql 文件，可使用下面的命令运行该文件：</p>
<h5 id="清单-45-异常表"><a href="#清单-45-异常表" class="headerlink" title="清单 45. 异常表"></a>清单 45. 异常表</h5><p> <code>db2 –vtf EX3-7.sql</code></p>
</li>
<li><p>对 LINEITEM 分区表运行</p>
</li>
</ol>
<pre><code><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">set integrity</span><br></pre></td></tr></table></figure>


语句 。

##### 清单 46. 设置完整性

`SET INTEGRITY FOR LINEITEM &lt;``br``&gt;``ALLOW WRITE ACCESS &lt;``br``&gt;``IMMEDIATE CHECKED &lt;``br``&gt;``FOR EXCEPTION IN LINEITEM USE LINEITEM_EX`

执行该操作的 SQL 位于 EX3-8.sql 文件中，可以使用下面的命令运行该文件：

##### 清单 47. 设置完整性

`db2 –vtf EX3-8.sql`

##### 图 23. EX3-8.sql 文件



注意

：

<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">SET INTEGRITY</span><br></pre></td></tr></table></figure>


对于检查新连接的数据是否在范围内是必需的，它还执行对索引和其他独立对象（例如物化查询表）所有必需的维护工作。只有得到



<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">SET INTEGRITY</span><br></pre></td></tr></table></figure>


语句的允许，新的数据才能变为可见。然而，当运行



<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">SET INTEGRITY</span><br></pre></td></tr></table></figure>


时，可以对 LINEITEM 表中的现有数据进行完全访问，包括读和写操作。 用户应该执行



<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">SET INTEGRITY</span><br></pre></td></tr></table></figure>


事务从而能够使用整个表。当运行



<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">SET INTEGRITY</span><br></pre></td></tr></table></figure>


时，不能够对表执行 DDL 或其他实用类型的操作。 在这个练习中，在 NP_LINEITEM 表中创建并被连接到 LINEITEM 表的所有的行，都在连接语句指定的范围内。如果这些行中存在超出此范围的行，则需要在



<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">SET INTEGRITY</span><br></pre></td></tr></table></figure>


语句中创建一个异常表来防止语句发生错误。所以推荐您始终在



<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">SET INTEGRITY</span><br></pre></td></tr></table></figure>


语句中包含一个异常表。如果没有提供异常表的话，

<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">SET INTEGRITY</span><br></pre></td></tr></table></figure>


语句发现的错误将导致语句失败并且所有的工作都必须从头做起。如果使用大量数据时，这可能是一个长期操作。有一点值得注意，如果



<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">SET INTEGRITY</span><br></pre></td></tr></table></figure>


操作失败，所有工作都需要重做，与之相比较，

<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">LOAD</span><br></pre></td></tr></table></figure>


仅仅抛弃存在问题的行。</code></pre>
<ol start="9">
<li>对 LINEITEM 表运行</li>
</ol>
<pre><code><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">select count</span><br></pre></td></tr></table></figure>


SQL 以检查连接的分区中数据的可用性：

##### 清单 48. Count Lineitem

`db2 “select count(*) from lineitem”`

##### 图 24. select count 语句的结果



注意

：成功执行



<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">SET INTEGRITY</span><br></pre></td></tr></table></figure>


操作后，LINEITEM 表应包含 PartitionId 4 的数据。</code></pre>
<h4 id="从分区表中分离一个分区"><a href="#从分区表中分离一个分区" class="headerlink" title="从分区表中分离一个分区"></a>从分区表中分离一个分区</h4><ol>
<li>使用</li>
</ol>
<pre><code><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">describe data partitions show detail</span><br></pre></td></tr></table></figure>


命令来标识一个分区的 PartitionName，您将把这个分区从 LINEITEM 分区表中分离（转出）出来。

##### 清单 49. 说明表

`db2 describe data partitions for table LINEITEM show detail`

##### 土 25. LINEITEM 表的分区



注意

：将分离最早的分区范围 PartitionId 0。该分区的 PartitionName 是 JAN1992。将在



<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">DETACH</span><br></pre></td></tr></table></figure>


操作中使用它来标识被转出的分区。同样还需注意成功执行了



<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">SET INTEGRITY</span><br></pre></td></tr></table></figure>


操作后，分区 JAN1994 的 AccessMode 的值为 ‘F’，Status 值为空。TableSpId、PartObjId 和 LongTblSpId 的结果可能和这里显示的不一样。</code></pre>
<ol start="2">
<li>使用</li>
</ol>
<pre><code><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">Alter</span><br></pre></td></tr></table></figure>


语句将 JAN1992 从 LINEITEM 表中分离（转出）。

##### 清单 50. Alter 表

`ALTER TABLE LINEITEM DETACH PARTITION JAN1992 INTO LINEITEM_JAN1992`

创建文件的 SQL 位于 EX3-11.sql 文件中，可使用下面的命令运行该文件：

##### 清单 51. Alter 表

`db2 –vtf EX3-11.sql.`

注意

：将 JAN1992 成功分离后，将创建一个新的表 LINEITEM_JAN1992。在



<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">DETACH</span><br></pre></td></tr></table></figure>


操作中没有涉及数据移动，并且位于相同表空间的新表的行为和它作为 LINEITEM 分区表的一部分时是一样的。此时不需要对 LINEITEM 表运行



<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">SET INTEGRITY</span><br></pre></td></tr></table></figure>


语句，因为没有对 LINEITEM 表定义的 MQTs。 还有一点值得注意，如果从 Multi-Dimensional Clustering（MDC）分离一个分区从而创建了一个新表时，这个表也将是一个 MDC。这个规则同样适用于下面这个情况：从一个分布式表中分离分区从而在相同的分区组创建分布式表。执行



<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">DETACH</span><br></pre></td></tr></table></figure>


操作后产生的表使用 MDC 索引定义而不是其他的索引。对于 MDC，在首次访问连接的表时将重新构建索引。在这种情况下，将自动对分离的分区进行索引清除操作。将从执行



<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">DETACH</span><br></pre></td></tr></table></figure>


操作的用户 ID 继承索引的模式、权限和表空间。</code></pre>
<ol start="3">
<li>运行两个</li>
</ol>
<pre><code><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">select count</span><br></pre></td></tr></table></figure>


语句检查



<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">DETACH</span><br></pre></td></tr></table></figure>


语句涉及的两个表中的数据的可用性。

##### 清单 52. Count Lineitem_jan1992

`db2 “select count(*) from lineitem_jan1992”`

##### 图 26. select count 语句的结果



注意

：创建的 LINEITEM_JAN1992 表包含 38 行，它被包含在 LINEITEM 分区表的 JAN1992 分区中。

##### 清单 53. Count lineitem

`db2 “select count(*) from lineitem”`

##### 图 27. select count 语句的结果



注意

：此时 LINEITEM 表完全可用，并且不包括 PART0 中的数据。</code></pre>
<ol start="4">
<li><p>当数据被移动到分区表中，或当希望将数据加载到或直接插入分区表中时，一个更合适的方法是向现有的分区表添加一个空的分区。使用下面的命令向现有的 LINEITEM 表添加一个空的分区：</p>
<h5 id="清单-54-说明"><a href="#清单-54-说明" class="headerlink" title="清单 54. 说明"></a>清单 54. 说明</h5><p> <code>db2 “ALTER TABLE LINEITEM ADD PARTITION JULY1994 ``STARTING &#39;1/7/1994&#39; ENDING &#39;31/12/1994&#39;”</code></p>
<h5 id="图-28-向现有的-LINEITEM-表添加一个空的分区"><a href="#图-28-向现有的-LINEITEM-表添加一个空的分区" class="headerlink" title="图 28. 向现有的 LINEITEM 表添加一个空的分区"></a>图 28. 向现有的 LINEITEM 表添加一个空的分区</h5></li>
</ol>
<ol start="5">
<li>使用</li>
</ol>
<pre><code><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">describe data partitions show detail</span><br></pre></td></tr></table></figure>


命令来检验 PartitionName 为 JULY1994 的分区是否被添加到 LINEITEM 中：

##### 清单 55. 说明

`db2 describe data partitions for table LINEITEM show detail`

##### 图 29. LINEITEM 表的分区</code></pre>
<h2 id="分区表的访问计划"><a href="#分区表的访问计划" class="headerlink" title="分区表的访问计划"></a>分区表的访问计划</h2><p>本实验将研究如何在访问计划中描述分区表：</p>
<ol>
<li><p>您将更新分区表中的统计信息。</p>
</li>
<li><p>您将使用 <code>db2expln</code> 命令并分析结果。</p>
</li>
<li><p>您将在执行查看的操作中使用 DB2 命令和 SQL 。</p>
</li>
<li><p>对 LINEITEM 表执行</p>
</li>
</ol>
<pre><code><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">RUNSTATS</span><br></pre></td></tr></table></figure>


操作：

##### 清单 56. Runstats

`db2 runstats on table db2inst1.lineitem`</code></pre>
<ol start="2">
<li><p>说明以下 SQL 语句并检查说明输出：</p>
<h5 id="清单-57-说明"><a href="#清单-57-说明" class="headerlink" title="清单 57. 说明"></a>清单 57. 说明</h5><p> <code>db2 “select l_shipdate,sum(l_quantity) from LINEITEM group by l_shipdate”</code></p>
<p> 要进行说明的 SQL 位于 EX4-2.sql 文件，可以使用下面的命令运行该文件：</p>
<h5 id="清单-58-说明输出"><a href="#清单-58-说明输出" class="headerlink" title="清单 58. 说明输出"></a>清单 58. 说明输出</h5><p> <code>db2expln –d SAMPLE –t –f EX4-2.sql</code></p>
<h5 id="图-30-说明输出"><a href="#图-30-说明输出" class="headerlink" title="图 30. 说明输出"></a>图 30. 说明输出</h5></li>
</ol>
<pre><code>注意

：该 SQL 执行了 LINEITEM 表的索引扫描。说明输出中有一个关于表分区的要点需要注意，所访问的表是被分区的，并且在扫描过程中所有数据分区都将被访问。</code></pre>
<ol start="3">
<li><p>说明下面的 SQL 语句并检查说明输出：</p>
<h5 id="清单-59-说明"><a href="#清单-59-说明" class="headerlink" title="清单 59. 说明"></a>清单 59. 说明</h5><p> <code>db2 “select l_shipdate, l_partkey, l_returnflag</code> <code>from LINEITEM</code> <code>where l_shipdate between &#39;01/01/1993&#39; and &#39;31/08/1993&#39;</code> <code>and l_partkey = 49981”</code></p>
<p> 要进行说明的 SQL 语句位于 EX4-3.sql 文件中，可使用下面的命令运行该文件：</p>
<h5 id="清单-60-说明输出"><a href="#清单-60-说明输出" class="headerlink" title="清单 60. 说明输出"></a>清单 60. 说明输出</h5><p> <code>db2expln –d SAMPLE –t –f EX4-3.sql</code></p>
<h5 id="图-31-说明输出"><a href="#图-31-说明输出" class="headerlink" title="图 31. 说明输出"></a>图 31. 说明输出</h5></li>
</ol>
<pre><code>注意

：这个 SQL 语句执行了 LINEITEM 表的索引扫描。在本例中，可以看到优化器能够执行数据分区排除操作。在说明输出中要注意的是关于表分区，访问的表是被分区的，将执行分区排除功能以及删除活动数据分区的值。 在本例中，活动的数据分区为 1-2。这里引用的是 syscat.datapartitions 中的序列号（seqno）而不是



<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">describe data partitions</span><br></pre></td></tr></table></figure>


命令中的 PartitionId。</code></pre>
<ol start="4">
<li><p>使用下面的 SQL 确定在前面说明示例中活动的分区的名称：</p>
<h5 id="清单-61-说明"><a href="#清单-61-说明" class="headerlink" title="清单 61. 说明"></a>清单 61. 说明</h5><p> <code>db2 “select seqno,datapartitionname &lt;``br``&gt;``from syscat.datapartitions &lt;``br``&gt;``where tabname = ‘LINEITEM’ order by seqno”</code></p>
<h5 id="图-32-分区名称"><a href="#图-32-分区名称" class="headerlink" title="图 32. 分区名称"></a>图 32. 分区名称</h5></li>
</ol>
<pre><code>注意

：序列号 1 和 2 分别映射的是 JAN1993 和 JULY1993 分区名称。</code></pre>
<h2 id="结束语"><a href="#结束语" class="headerlink" title="结束语"></a>结束语</h2><p>本教程基于 IBM DB2 9 Data Partitioning 特性。您已在以下几个方面获得了第一手的经验：</p>
<ul>
<li>如何定义分区表</li>
<li>如何将分区表放置在底层磁盘子系统</li>
<li>如何维护分区表</li>
<li>如何使用 DB2 Explain 说明分区表</li>
</ul>
<p>范围分区将数据映射到基于关键值范围的分区，用户为每一个分区建立关键值范围。例如，企业通常希望以月份为单位，将销售数据划分到各月的分区中。与 MDC 功能集合使用时，范围分区将更加方便地定位数据，从而加快通过复杂查询检索信息的速度。</p>
<p><a target="_blank" rel="noopener" href="https://www.ibm.com/developerworks/cn/education/data/dm0612read/dm0612read.html?from=singlemessage&amp;isappinstalled=0#ibm-pcon">https://www.ibm.com/developerworks/cn/education/data/dm0612read/dm0612read.html?from=singlemessage&amp;isappinstalled=0#ibm-pcon</a></p>

      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

      
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="zh-CN">
    <link itemprop="mainEntityOfPage" href="http://example.com/2021/01/15/DB2%E9%94%99%E8%AF%AF%E4%BB%A3%E7%A0%81%E5%A4%A7%E5%85%A8/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/00-00-00.JPG">
      <meta itemprop="name" content="severus">
      <meta itemprop="description" content="正在享受无法回避的痛苦">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Sary.severus`s blog">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          
            <a href="/2021/01/15/DB2%E9%94%99%E8%AF%AF%E4%BB%A3%E7%A0%81%E5%A4%A7%E5%85%A8/" class="post-title-link" itemprop="url">未命名</a>
        </h2>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">发表于</span>

              <time title="创建时间：2021-01-15 14:28:30" itemprop="dateCreated datePublished" datetime="2021-01-15T14:28:30+08:00">2021-01-15</time>
            </span>

          

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <table>
<thead>
<tr>
<th>SQLCode</th>
<th>SQLState</th>
<th>状态说明</th>
</tr>
</thead>
<tbody><tr>
<td>000</td>
<td>00000</td>
<td>SQL语句成功完成</td>
</tr>
<tr>
<td>01xxx</td>
<td>XXX</td>
<td>SQL语句成功完成，但是有警告</td>
</tr>
<tr>
<td>+012</td>
<td>01545</td>
<td>未限定的列名被解释为一个有相互关系的引用</td>
</tr>
<tr>
<td>+098</td>
<td>01568</td>
<td>动态SQL语句用分号结束</td>
</tr>
<tr>
<td>+100</td>
<td>02000</td>
<td>没有找到满足SQL语句的行</td>
</tr>
<tr>
<td>+110</td>
<td>01561</td>
<td>用DATA CAPTURE定义的表的更新操作不能发送到原来的子系统</td>
</tr>
<tr>
<td>+111</td>
<td>01590</td>
<td>为2型索引设置了SUBPAGES语句</td>
</tr>
<tr>
<td>+117</td>
<td>01525</td>
<td>要插入的值的个数不等于被插入表的列数</td>
</tr>
<tr>
<td>+162</td>
<td>01514</td>
<td>指定的表空间被置为检查挂起状态</td>
</tr>
<tr>
<td>+203</td>
<td>01552</td>
<td>使用非唯一的名字来解决命名的限定列</td>
</tr>
<tr>
<td>+204</td>
<td>01532</td>
<td>命名的对象未在DB2中定义</td>
</tr>
<tr>
<td>+206</td>
<td>01533</td>
<td>命名的列不在SQL语句中指定的任何表中存在</td>
</tr>
<tr>
<td>+218</td>
<td>01537</td>
<td>因为SQL语句引用一个远程对象，不能为该SQL语句执行EXPLAIN</td>
</tr>
<tr>
<td>+219</td>
<td>01532</td>
<td>命名的PLAN TABLE不存在</td>
</tr>
<tr>
<td>+220</td>
<td>01546</td>
<td>不正确定义PLAN TABLE，检查命名列的定义</td>
</tr>
<tr>
<td>+236</td>
<td>01005</td>
<td>SQLDA中的SQLN的值至少应于所描述的列的个数一样大</td>
</tr>
<tr>
<td>+237</td>
<td>01594</td>
<td>至少有一个被描述的列应该是单值类型，因此扩展的SQLVAR条目需要另外的空间</td>
</tr>
<tr>
<td>+238</td>
<td>01005</td>
<td>至少应有一个被描述的列是一个LOB，因此扩展的SQLVAR条目需要另外的空间</td>
</tr>
<tr>
<td>+239</td>
<td>01005</td>
<td>至少应有一个被描述的列应是单值类型，因此扩展的SQLVAR条目需要另外的空间</td>
</tr>
<tr>
<td>+304</td>
<td>01515</td>
<td>该值不能被分配给宿主变量，因为该值不再数据类型的范围之内</td>
</tr>
<tr>
<td>+331</td>
<td>01520</td>
<td>不能被翻译的字符串，因此被设置为NULL</td>
</tr>
<tr>
<td>+339</td>
<td>01569</td>
<td>由于与DB2 2.2版本的子系统连接，所以可能存在字符转换问题</td>
</tr>
<tr>
<td>+394</td>
<td>01629</td>
<td>使用优化提示来选择访问路径</td>
</tr>
<tr>
<td>+395</td>
<td>01628</td>
<td>设置了无效的优化提示，原因代码指定了为什么，忽略优化提示</td>
</tr>
<tr>
<td>+402</td>
<td>01521</td>
<td>未知的位置</td>
</tr>
<tr>
<td>+403</td>
<td>01522</td>
<td>本地不存在CREAT ALIAS对象</td>
</tr>
<tr>
<td>+434</td>
<td>01608</td>
<td>在DB2未来发布的版本中将不支持指定的特性，IBM建议你停止使用这些特性</td>
</tr>
<tr>
<td>+445</td>
<td>01004</td>
<td>值被CAST函数截取</td>
</tr>
<tr>
<td>+462</td>
<td>01Hxx</td>
<td>由用户定义的函数或存储过程发出的警告</td>
</tr>
<tr>
<td>+464</td>
<td>01609</td>
<td>命名的存储过程超出了它可能返回的查询结果集的个数限制</td>
</tr>
<tr>
<td>+466</td>
<td>01610</td>
<td>指定由命名的存储过程返回的查询结果集的个数。成功完成</td>
</tr>
<tr>
<td>+494</td>
<td>01614</td>
<td>由存储过程返回的结果集的个数超过了由ASSOCIATE LOCATORS语句指定的结果集定位器的个数</td>
</tr>
<tr>
<td>+495</td>
<td>01616</td>
<td>因为倒台SQL的成本估算超出了在ELST中指定的警告阀值，所以发出警告</td>
</tr>
<tr>
<td>+535</td>
<td>01591</td>
<td>请求一个主健的定位更新，或请求一个使用自我引出 约束的表的删除操作</td>
</tr>
<tr>
<td>+541</td>
<td>01543</td>
<td>命名外健是一个重复的引用约束</td>
</tr>
<tr>
<td>+551</td>
<td>01548</td>
<td>命名的授权ID缺少在命名的DB2对象上执行命名操作的权限</td>
</tr>
<tr>
<td>+552</td>
<td>01542</td>
<td>命名的授权ID缺少执行命名操作的权限</td>
</tr>
<tr>
<td>+558</td>
<td>01516</td>
<td>已经被授权该PUBLIC，因此WITH GRANT OPTION不可用</td>
</tr>
<tr>
<td>+561</td>
<td>01523</td>
<td>对ALTER REFERENCES INDEX 和TRIGGER特权，PUBLIC AT ALL LOCATION无效</td>
</tr>
<tr>
<td>+562</td>
<td>01560</td>
<td>因为GRANTEE已经拥有这些特权，所以一个或更多的特权被忽略</td>
</tr>
<tr>
<td>+585</td>
<td>01625</td>
<td>模式名指定了不止一次</td>
</tr>
<tr>
<td>+599</td>
<td>01596</td>
<td>没有为长字符数据类型（BLOB，CLOB和DBCLOB）建立比较函数</td>
</tr>
<tr>
<td>+610</td>
<td>01566</td>
<td>由于建立了一个指定为DEFER YES的索引，指定的对象处于PENDING状态，或者因为使用了ALTER INDEX改变关键值的范围，所以指定的对象处于PENDING状态</td>
</tr>
<tr>
<td>+625</td>
<td>01518</td>
<td>因为删除了主健索引，所以表定义被标注为不完整</td>
</tr>
<tr>
<td>+626</td>
<td>01529</td>
<td>删除了加强UNIQUE约束的索引，唯一性不在被加强</td>
</tr>
<tr>
<td>+645</td>
<td>01528</td>
<td>因为建立的索引中没有包含NULL，所以WHERE NOT NULL被忽略</td>
</tr>
<tr>
<td>+650</td>
<td>01538</td>
<td>不能更改或者建立已命名的表为从属表</td>
</tr>
<tr>
<td>+653</td>
<td>01551</td>
<td>在已指定的分区表空间中尚没有建立指定的分区索引，所以分区索引不可得</td>
</tr>
<tr>
<td>+655</td>
<td>01597</td>
<td>为CREATE或ALTER STOGROUP语句指定特定或者非特定的卷ID，在DB2较新发布的版本中（版本6以后）将不再支持他们</td>
</tr>
<tr>
<td>+658</td>
<td>01600</td>
<td>当建立目录索引时，不能指定SUBPAGES语句，SUBPAGES将被忽略，并缺省为1</td>
</tr>
<tr>
<td>+664</td>
<td>01540</td>
<td>分区索引的限制关键字超出了最大值</td>
</tr>
<tr>
<td>+738</td>
<td>01530</td>
<td>已命名的对象的更改可能像只读系统中对象的改变要求一样</td>
</tr>
<tr>
<td>+799</td>
<td>0157</td>
<td>SET语句中引用的特定寄存器不存在，将忽略 SET请求</td>
</tr>
<tr>
<td>+802</td>
<td>01519</td>
<td>数据溢出或者因除法异常而引起的数据异常错误</td>
</tr>
<tr>
<td>+806</td>
<td>01553</td>
<td>ISOLATION（RR）与LOCKSIZE PAGE 冲突</td>
</tr>
<tr>
<td>+807</td>
<td>01554</td>
<td>由于十进制乘法导致溢出</td>
</tr>
<tr>
<td>+863</td>
<td>01539</td>
<td>连接成功，但是只支持SBCS</td>
</tr>
<tr>
<td>+2000</td>
<td>56094</td>
<td>SUBPAGES不等于1的1型索引不能成为数据共享环境中的缓冲池组依赖者</td>
</tr>
<tr>
<td>+2002</td>
<td>01624</td>
<td>因为指定的缓冲池不允许超高速缓存，GNPCACHE指定被忽略</td>
</tr>
<tr>
<td>+2007</td>
<td>01602</td>
<td>因为DB2子系统的参数禁用“提示(hiats）”所以不能指定优化提示</td>
</tr>
<tr>
<td>+30100</td>
<td>01558</td>
<td>分布式协议错误被检测到，提供原来的SQLCODE和SQLSTATE</td>
</tr>
<tr>
<td>-007</td>
<td>42601</td>
<td>SQL语句中由非法字符</td>
</tr>
<tr>
<td>-010</td>
<td>42603</td>
<td>字符串常量非正常终止；检查到有遗漏的引号标志</td>
</tr>
<tr>
<td>-029</td>
<td>42601</td>
<td>需要INTO语句</td>
</tr>
<tr>
<td>-060</td>
<td>42815</td>
<td>某特定数据类型的长度或者标量规范无效</td>
</tr>
<tr>
<td>-084</td>
<td>42612</td>
<td>不能执行SQL语句，因为该语句对动态SQL无效或者对OS/390的DB2无效</td>
</tr>
<tr>
<td>-097</td>
<td>42601</td>
<td>在单位类型、用户自定义的函数以及过程中不能使用带有CAST的LONG VARCHAR或LONGVARGRAPHIC</td>
</tr>
<tr>
<td>-101</td>
<td>54001</td>
<td>SQL语句超出了已确定的DB2限制：例如，表的数目太多，语句中的字节太多</td>
</tr>
<tr>
<td>-102</td>
<td>54002</td>
<td>字符串常量太长</td>
</tr>
<tr>
<td>-103</td>
<td>42604</td>
<td>无效数学文字</td>
</tr>
<tr>
<td>-104</td>
<td>42601</td>
<td>SQL语句中遇到非法符号</td>
</tr>
<tr>
<td>-105</td>
<td>42604</td>
<td>无效的字符串格式；通常引用一个格式不正确的图形字符串</td>
</tr>
<tr>
<td>-107</td>
<td>42622</td>
<td>对象名太长</td>
</tr>
<tr>
<td>-108</td>
<td>42601</td>
<td>RENAME语句中指定的名字有错误，不能使用限定词</td>
</tr>
<tr>
<td>-109</td>
<td>42601</td>
<td>指定了无效语句；例如CREATE VIEW不能包含ORDER BY 语句</td>
</tr>
<tr>
<td>-110</td>
<td>42606</td>
<td>遇到了无效的十六进制的文字</td>
</tr>
<tr>
<td>-111</td>
<td>42901</td>
<td>指定的列函数没有给出列名</td>
</tr>
<tr>
<td>-112</td>
<td>42607</td>
<td>无效的列函数语法；列函数不能运行与其他的列函数之上</td>
</tr>
<tr>
<td>-113</td>
<td>42602</td>
<td>遇到无效字符</td>
</tr>
<tr>
<td>-114</td>
<td>42961</td>
<td>该语句的位置名称必须与当前服务器匹配，但是却没有匹配</td>
</tr>
<tr>
<td>-115</td>
<td>42601</td>
<td>因为比较运算符没有伴着一个表达式或者列表，遇到了无效谓词</td>
</tr>
<tr>
<td>-117</td>
<td>42802</td>
<td>待插入的数值的个数于被插入的行中的列数不相等</td>
</tr>
<tr>
<td>-118</td>
<td>42902</td>
<td>数据修改语句(UPDATE或DELETE）和FROM语句中的表和视图命名不合法</td>
</tr>
<tr>
<td>-119</td>
<td>42803</td>
<td>HAVING语句中的列的列表与GROUP BY语句中的列列表不匹配</td>
</tr>
<tr>
<td>-120</td>
<td>42903</td>
<td>不允许WHERE语句、SET语句、VALUES语句或者SET ASSIGNMENT语句引用列函数</td>
</tr>
<tr>
<td>-121</td>
<td>42701</td>
<td>在INSERT或UPDATE语句中，某一列被非法引用了两次</td>
</tr>
<tr>
<td>-122</td>
<td>42803</td>
<td>非法使用了列函数。因为没有用于一个列函数的所有列不再GROUP BY语句中</td>
</tr>
<tr>
<td>-123</td>
<td>42601</td>
<td>特定位置的参数必须是一个常数或者一个关键词</td>
</tr>
<tr>
<td>-125</td>
<td>42805</td>
<td>ORDER BY语句中指定了无效数字，该数字要么小于1要么大于选定的列数</td>
</tr>
<tr>
<td>-126</td>
<td>42829</td>
<td>不能为一个UPDATE语句指定ORDER BY语句</td>
</tr>
<tr>
<td>-127</td>
<td>42905</td>
<td>在子选择中DISTINCT只能指定一次</td>
</tr>
<tr>
<td>-128</td>
<td>42601</td>
<td>SQL谓词中NULL使用不当</td>
</tr>
<tr>
<td>-129</td>
<td>54004</td>
<td>SQL语句中包含的表多于15个</td>
</tr>
<tr>
<td>-130</td>
<td>22019</td>
<td>ESCAPE语句必须为一个字符</td>
</tr>
<tr>
<td>-131</td>
<td>42818</td>
<td>LIKE谓词只能用于字符数据</td>
</tr>
<tr>
<td>-132</td>
<td>42824</td>
<td>LIKE语句、ESCAPE语句、LOCATE函数或POSSTR函数中有无效运算对象</td>
</tr>
<tr>
<td>-133</td>
<td>42906</td>
<td>无效相关子查询引用</td>
</tr>
<tr>
<td>-134</td>
<td>42907</td>
<td>大于255字节的列被不正确使用</td>
</tr>
<tr>
<td>-136</td>
<td>54005</td>
<td>排序关键字的长度大于4000字节</td>
</tr>
<tr>
<td>-137</td>
<td>54006</td>
<td>被连接的字符串太大；字符的最大值为32767；图形的最大值为16382</td>
</tr>
<tr>
<td>-138</td>
<td>22011</td>
<td>SUBSTR列函数的第二个或第三个操作符无效</td>
</tr>
<tr>
<td>-142</td>
<td>42612</td>
<td>不支持的SQL语句。该语句可能在另外的RDBMS上有效，也有可能在其他的上下文中有效（例如，VALUES只能在触发器中出现）</td>
</tr>
<tr>
<td>-144</td>
<td>58003</td>
<td>指定的段号无效</td>
</tr>
<tr>
<td>-147</td>
<td>42809</td>
<td>某一源函数不能更改。要改变源函数，必须删除该源函数并重新建立他</td>
</tr>
<tr>
<td>-148</td>
<td>42809</td>
<td>RENAME和ALTER无法执行。RENAME不能对视图或者活动RI.ST表重新命名。ALTER不能用于改变列的长度，因为该列参与了RI、一个用户退出程序、全局的临时表或打开DATACAPTURE CHANGES表的列</td>
</tr>
<tr>
<td>-150</td>
<td>42807</td>
<td>触发活动的INSERT，UPDATE或DELETE语句中指定了无效的视图更新或一个无效的转换表</td>
</tr>
<tr>
<td>-151</td>
<td>42808</td>
<td>试图更新一个不可更新的视图的列、一个DB2 CATALOG表的列或者一个ROWID列</td>
</tr>
<tr>
<td>-152</td>
<td>42809</td>
<td>DROP CHECK试图删除一个参照约束，或者DROP FOREIGN试图删除一个检查约束</td>
</tr>
<tr>
<td>-153</td>
<td>42908</td>
<td>无效的视图建立请求，必须为旋转列表中列出的列出的未命名的列或者重复的列提供一个名字</td>
</tr>
<tr>
<td>-154</td>
<td>42909</td>
<td>不能用UNION、UNION ALL或者一个远程表建立视图</td>
</tr>
<tr>
<td>-156</td>
<td>42809</td>
<td>在视图上建立索引是非法的，或者在ALTER TABLE，CREATE TRIGGER，DROP TABLE或LOCK TABLE语句上指定一个不是表的其他对象这是无效的</td>
</tr>
<tr>
<td>-157</td>
<td>42810</td>
<td>必须在FOREIGN KEY语句中指定一个表名</td>
</tr>
<tr>
<td>-158</td>
<td>42811</td>
<td>视图的列和选择列表中的列不相匹配</td>
</tr>
<tr>
<td>-159</td>
<td>42089</td>
<td>无效DROP或COMMENT ON语句</td>
</tr>
<tr>
<td>-160</td>
<td>42813</td>
<td>对该视图的WITH CHECK OPTION无效</td>
</tr>
<tr>
<td>-161</td>
<td>44000</td>
<td>正被更新的视图WITH CHECK OPTION语句使得这行不能被插入或更新</td>
</tr>
<tr>
<td>-164</td>
<td>42502</td>
<td>用户没有建立这个视图的权限</td>
</tr>
<tr>
<td>-170</td>
<td>42605</td>
<td>标量函数指定了无效的参数个数</td>
</tr>
<tr>
<td>-171</td>
<td>42815</td>
<td>标量函数指定了无效的数据类型长度或者无效数值</td>
</tr>
<tr>
<td>-173</td>
<td>42801</td>
<td>在非只读型的游标上不能指定隔离级别UR</td>
</tr>
<tr>
<td>-180</td>
<td>22007</td>
<td>DATE、TIME、TIMESTAMP值的字符串表示法的语法不对</td>
</tr>
<tr>
<td>-181</td>
<td>22001</td>
<td>不是有效的DATE、TIME、TIMESTAMP值</td>
</tr>
<tr>
<td>-182</td>
<td>42816</td>
<td>在算术表达式中的日期/时间值无效</td>
</tr>
<tr>
<td>-183</td>
<td>22008</td>
<td>在算术表达式中返回的日期/时间值的结果不在有效值的范围内</td>
</tr>
<tr>
<td>-184</td>
<td>42610</td>
<td>没有正确使用日期/时间值的参数标记</td>
</tr>
<tr>
<td>-185</td>
<td>57008</td>
<td>没有定义本定的日期/时间出口</td>
</tr>
<tr>
<td>-186</td>
<td>22505</td>
<td>改变本定的日期/时间出口引发这个程序的长度无效</td>
</tr>
<tr>
<td>-187</td>
<td>22506</td>
<td>MVS返回无效的当前日期/时间</td>
</tr>
<tr>
<td>-188</td>
<td>22503</td>
<td>字符串表示无效</td>
</tr>
<tr>
<td>-189</td>
<td>22522</td>
<td>指定的编码字符集的ID无效或没有定义</td>
</tr>
<tr>
<td>-190</td>
<td>42837</td>
<td>不能象所设定的那样改变（ALTER）列。只能改变（ALTER）VARCHAR列的长度</td>
</tr>
<tr>
<td>-191</td>
<td>22504</td>
<td>字符串中包含了无效的混合数据</td>
</tr>
<tr>
<td>-197</td>
<td>42877</td>
<td>当两个或多个表被联合在一起排序时，限定的列名不能在ORDER BY语句中使用</td>
</tr>
<tr>
<td>-198</td>
<td>42617</td>
<td>试图对空的字符串发布一个PREPARE或EXECUTE IMMEDIATE语句</td>
</tr>
<tr>
<td>-199</td>
<td>42601</td>
<td>SQL语句中使用了非法关键词</td>
</tr>
<tr>
<td>-203</td>
<td>42702</td>
<td>模糊列引用</td>
</tr>
<tr>
<td>-204</td>
<td>42704</td>
<td>没有定义的对象名</td>
</tr>
<tr>
<td>-205</td>
<td>42703</td>
<td>指定的表的列名无效</td>
</tr>
<tr>
<td>-206</td>
<td>42703</td>
<td>列名没有在FROM语句所引用的任何表中，或者没有在定义触发器所在的表中</td>
</tr>
<tr>
<td>-208</td>
<td>42707</td>
<td>不能ORDER BY指定列，应为该列不在选择列表中</td>
</tr>
<tr>
<td>-212</td>
<td>42712</td>
<td>指定的表名在触发器中不允许多次使用，只能使用一次</td>
</tr>
<tr>
<td>-214</td>
<td>42822</td>
<td>DISTINCT、ORDER BY 引起的无效表达式</td>
</tr>
<tr>
<td>-219</td>
<td>42704</td>
<td>因为PLAN_TABLE不存在，EXPLAIN无法执行</td>
</tr>
<tr>
<td>-220</td>
<td>55002</td>
<td>遇到无效的PLAN_TABLE列</td>
</tr>
<tr>
<td>-221</td>
<td>55002</td>
<td>如果为PLAN_TABLE定义了可供选择的列，那么，必须定义所有的列</td>
</tr>
<tr>
<td>-229</td>
<td>42708</td>
<td>指定的现场找不到</td>
</tr>
<tr>
<td>-240</td>
<td>428B4</td>
<td>LOCK TABLE语句的PART子句无效</td>
</tr>
<tr>
<td>-250</td>
<td>42718</td>
<td>没有定义本地位置名</td>
</tr>
<tr>
<td>-251</td>
<td>42602</td>
<td>记号无效</td>
</tr>
<tr>
<td>-300</td>
<td>22024</td>
<td>宿主变量或参数中的字符串不是以NULL为终止</td>
</tr>
<tr>
<td>-301</td>
<td>42895</td>
<td>无效的宿主变量数据类型</td>
</tr>
<tr>
<td>-302</td>
<td>22001</td>
<td>输入的变量值对指定的列无效</td>
</tr>
<tr>
<td>-303</td>
<td>42806</td>
<td>因为数据类型不兼容，不能分配数值</td>
</tr>
<tr>
<td>-304</td>
<td>22003</td>
<td>因为数据超出了范围，不能分配数值</td>
</tr>
<tr>
<td>-305</td>
<td>22002</td>
<td>没有NULL指示符变量</td>
</tr>
<tr>
<td>-309</td>
<td>22512</td>
<td>因为引用的宿主变量被设置成NULL，所以谓词无效</td>
</tr>
<tr>
<td>-310</td>
<td>22501</td>
<td>十进制的宿主变量或参数包含非十进制数据</td>
</tr>
<tr>
<td>-311</td>
<td>22501</td>
<td>输入的宿主变量长度无效，或者时负值或者太大</td>
</tr>
<tr>
<td>-312</td>
<td>42618</td>
<td>没有定义宿主变量或者宿主变量不可用</td>
</tr>
<tr>
<td>-313</td>
<td>7001</td>
<td>宿主变量的个数不等于参数标识的个数</td>
</tr>
<tr>
<td>-314</td>
<td>42714</td>
<td>模糊的宿主变量引用</td>
</tr>
<tr>
<td>-327</td>
<td>22525</td>
<td>在最后分区的关键字范围内，不能插入行</td>
</tr>
<tr>
<td>-330</td>
<td>22021</td>
<td>不能成功的翻译字符串</td>
</tr>
<tr>
<td>-331</td>
<td>22021</td>
<td>字符串不能分配到宿主变量，因为其不能成功的被翻译</td>
</tr>
<tr>
<td>-332</td>
<td>57017</td>
<td>不能为两个命名的编码字符集的ID定义翻译规则</td>
</tr>
<tr>
<td>-333</td>
<td>56010</td>
<td>子类型无效导致翻译失败</td>
</tr>
<tr>
<td>-338</td>
<td>42972</td>
<td>ON语句无效，必须引用连接的列</td>
</tr>
<tr>
<td>-339</td>
<td>56082</td>
<td>访问DB2 2.2版本的子系统被拒绝，原因时ASCII到EBCDIC翻译不能进行</td>
</tr>
<tr>
<td>-351</td>
<td>56084</td>
<td>SELECT列表中有不支持的数据类型</td>
</tr>
<tr>
<td>-352</td>
<td>56084</td>
<td>输入列表中有不支持的数据类型</td>
</tr>
<tr>
<td>-355</td>
<td>42993</td>
<td>LOB列太大，以至不能被记录在日志中</td>
</tr>
<tr>
<td>-372</td>
<td>428C1</td>
<td>每个表只允许有一个ROWID列</td>
</tr>
<tr>
<td>-390</td>
<td>42887</td>
<td>在上下文中指定的函数无效</td>
</tr>
<tr>
<td>-392</td>
<td>42855</td>
<td>自从前一次FETCH以来，指定游标的SQLDA已被不恰当的改变</td>
</tr>
<tr>
<td>-396</td>
<td>38505</td>
<td>在最后的访问过程中，视图执行SQL语句</td>
</tr>
<tr>
<td>-397</td>
<td>428D3</td>
<td>在某一列上不恰当的指定了GENERATED因为该列不是ROWID数据类型</td>
</tr>
<tr>
<td>-398</td>
<td>428D2</td>
<td>为某一个宿主变量请求LOCATOR，但是该宿主变量不是一个LOB</td>
</tr>
<tr>
<td>-399</td>
<td>22511</td>
<td>在INSERT语句中为ROWID列指定的值无效</td>
</tr>
<tr>
<td>-400</td>
<td>54027</td>
<td>在DB2编目中定义的用户自定义索引不能超过100个</td>
</tr>
<tr>
<td>-401</td>
<td>42818</td>
<td>算术操作符或比较操作符的操作对象不是兼容的</td>
</tr>
<tr>
<td>-402</td>
<td>42819</td>
<td>算术函数不能用于字符或日期时间数据</td>
</tr>
<tr>
<td>-404</td>
<td>22001</td>
<td>SQL语句指定的字符串太长</td>
</tr>
<tr>
<td>-405</td>
<td>42820</td>
<td>数值文字超出了范围</td>
</tr>
<tr>
<td>-406</td>
<td>22003</td>
<td>计算出的或者倒出的数值超出了范围</td>
</tr>
<tr>
<td>-407</td>
<td>23502</td>
<td>不能把NULL值插到定义为NOT NULL的列中</td>
</tr>
<tr>
<td>-408</td>
<td>42821</td>
<td>数值不能被更新或插入，因为他与列的数据类型不兼容</td>
</tr>
<tr>
<td>-409</td>
<td>42607</td>
<td>COUNT函数指定的运算对象无效</td>
</tr>
<tr>
<td>-410</td>
<td>42820</td>
<td>浮点文字笔30个字符的最大允许长度长</td>
</tr>
<tr>
<td>-411</td>
<td>56040</td>
<td>CURRENT SQLID使用无效</td>
</tr>
<tr>
<td>-412</td>
<td>42823</td>
<td>在子查询的选择列表中遇到了多个列</td>
</tr>
<tr>
<td>-413</td>
<td>22003</td>
<td>当转换为一个数字型数据类型时，数据溢出</td>
</tr>
<tr>
<td>-414</td>
<td>42824</td>
<td>LIKE谓词不能运行于用数字或日期时间类型定义的列</td>
</tr>
<tr>
<td>-415</td>
<td>42825</td>
<td>为UNION操作指定的选择列表不是联合兼容的</td>
</tr>
<tr>
<td>-416</td>
<td>42907</td>
<td>包含UNION操作符的SQL语句不允许有长的字符串列</td>
</tr>
<tr>
<td>-417</td>
<td>42609</td>
<td>两参数标识符作为运算对象被指定在同一谓词的两边</td>
</tr>
<tr>
<td>-418</td>
<td>42610</td>
<td>参数标识符使用无效</td>
</tr>
<tr>
<td>-419</td>
<td>42911</td>
<td>十进制除法无效</td>
</tr>
<tr>
<td>-420</td>
<td>22018</td>
<td>字符串自变量值不符合函数的要求</td>
</tr>
<tr>
<td>-421</td>
<td>42826</td>
<td>UNION操作的选择列表中没有提供相同数目的列</td>
</tr>
<tr>
<td>-423</td>
<td>0F001</td>
<td>为LOB或结果集定位器指定的值无效</td>
</tr>
<tr>
<td>-426</td>
<td>2D528</td>
<td>在不允许更新的应用服务器不允许执行COMMIT语句</td>
</tr>
<tr>
<td>-427</td>
<td>2D529</td>
<td>在不允许更新的应用服务器不允许执行ROLLBACK语句</td>
</tr>
<tr>
<td>-430</td>
<td>38503</td>
<td>在用户自定义的函数或存储过程中遇到了错误</td>
</tr>
<tr>
<td>-433</td>
<td>22001</td>
<td>指定的值太长</td>
</tr>
<tr>
<td>-435</td>
<td>428B3</td>
<td>无效的应用定义的SQLSTATE</td>
</tr>
<tr>
<td>-438</td>
<td>xxxxx</td>
<td>使用了RAISE_ERROR函数的应用发出了一个错误</td>
</tr>
<tr>
<td>-440</td>
<td>42884</td>
<td>存储过程或用户自定义函数的参数列表参数个数于预期的个数不匹配</td>
</tr>
<tr>
<td>-441</td>
<td>42601</td>
<td>与标量函数一起使用DISTINCT或ALL是不正确的用法</td>
</tr>
<tr>
<td>-443</td>
<td>42601</td>
<td>指定的外部函数返回错误的SQLSTATE</td>
</tr>
<tr>
<td>-444</td>
<td>42724</td>
<td>与被称为存储过程或用户自定义函数有关的程序不能找到</td>
</tr>
<tr>
<td>-449</td>
<td>42878</td>
<td>对存储过程或用户自定义的 函数，CREATE或ALTER语句不正确（缺失EXTERNAL NAME 子句)</td>
</tr>
<tr>
<td>-450</td>
<td>39501</td>
<td>存储过程或用户自定义函数写入存储器的值超过了参数声明的长度</td>
</tr>
<tr>
<td>-451</td>
<td>42815</td>
<td>CREATE FUNCTION中指定了不正确的数据类型</td>
</tr>
<tr>
<td>-453</td>
<td>42880</td>
<td>用户自定义函数中的RETURNS语句无效</td>
</tr>
<tr>
<td>-454</td>
<td>42723</td>
<td>指定的函数识别标记与已存在的另一函数的识别标记冲突</td>
</tr>
<tr>
<td>-455</td>
<td>42882</td>
<td>模式名不比配</td>
</tr>
<tr>
<td>-456</td>
<td>42710</td>
<td>为用户自定义函数指定的函数名已经存在</td>
</tr>
<tr>
<td>-457</td>
<td>42939</td>
<td>用户自定义函数或用户自定义类型正试图使用系统中定义的函数或者类型所用的名称</td>
</tr>
<tr>
<td>-458</td>
<td>42883</td>
<td>没有找到函数</td>
</tr>
<tr>
<td>-463</td>
<td>39001</td>
<td>特定的外部例程返回无效的SQLSTATE</td>
</tr>
<tr>
<td>-469</td>
<td>42886</td>
<td>参数定义为OUT或INOUT的CALL语句必须提供宿主变量</td>
</tr>
<tr>
<td>-470</td>
<td>39002</td>
<td>指定了NULL参数，但是该例程却不支持NULL</td>
</tr>
<tr>
<td>-471</td>
<td>55023</td>
<td>存储过程或用户自定义函数失败：提供原因代码</td>
</tr>
<tr>
<td>-472</td>
<td>24517</td>
<td>外部的函数程序使游标处于打开状态</td>
</tr>
<tr>
<td>-473</td>
<td>42918</td>
<td>用户自定义数据类型命名不能和系统定义的数据类型一样</td>
</tr>
<tr>
<td>-475</td>
<td>42866</td>
<td>结果类型不能被转换成RETURNS类型</td>
</tr>
<tr>
<td>-476</td>
<td>42725</td>
<td>在其模式中该函数不是独一无二的</td>
</tr>
<tr>
<td>-478</td>
<td>42893</td>
<td>不能DROP或REVOKE特定的对象，因为其他对象依赖于该对象</td>
</tr>
<tr>
<td>-480</td>
<td>51030</td>
<td>直到存储过程已经被CALL后，DESCRIBE PROCEDURE和ASSOCIATE LOCATORS才能被发布</td>
</tr>
<tr>
<td>-482</td>
<td>51030</td>
<td>存储过程不返回到任何一个定位器</td>
</tr>
<tr>
<td>-483</td>
<td>42885</td>
<td>CREATE FUNCTION语句中的参数个数与源函数中的参数个数不匹配</td>
</tr>
<tr>
<td>-487</td>
<td>38001</td>
<td>选择了NO SQL选项建立指定的存储过程或用户自定义函数，但却视图发布SQL语句</td>
</tr>
<tr>
<td>-491</td>
<td>42601</td>
<td>CREATE FUNCTION语句无效，因为该语句没有RETURNS语句或者因为该语句没有指定有效的SOURCE或者EXTERNAL语句</td>
</tr>
<tr>
<td>-492</td>
<td>42879</td>
<td>指定函数的指定参数的个数有错误</td>
</tr>
<tr>
<td>-495</td>
<td>57051</td>
<td>语句的估计处理器成本超出了资源限制</td>
</tr>
<tr>
<td>-496</td>
<td>51033</td>
<td>语句无法执行，因为当前服务器与调用存储过程的服务器不同</td>
</tr>
<tr>
<td>-497</td>
<td>54041</td>
<td>指定的数据库超过了32767 OBID的上限，或者CREATE DATABASE语句使之达到了32511DBID的上限</td>
</tr>
<tr>
<td>-499</td>
<td>24516</td>
<td>指定的游标已被分配到结果集，该结果集来自已经指定的存储过程</td>
</tr>
<tr>
<td>-500</td>
<td>24501</td>
<td>因为连接被破坏，WITH HOLD游标被关闭</td>
</tr>
<tr>
<td>-501</td>
<td>24501</td>
<td>在试图获取数据或关闭一个游标前必须打开一个游标</td>
</tr>
<tr>
<td>-502</td>
<td>24502</td>
<td>在没有关闭游标前不能再次打开游标</td>
</tr>
<tr>
<td>-503</td>
<td>42912</td>
<td>因为列在游标的FOR UPDATE OF语句中没有被指定，该游标用于获取该列，所以不能更新该列</td>
</tr>
<tr>
<td>-504</td>
<td>34000</td>
<td>不能引用一个游标，因为他不是定义到程序里的</td>
</tr>
<tr>
<td>-507</td>
<td>24501</td>
<td>在试图更新或者删除WHERE CURRENT OF前，必须打开游标</td>
</tr>
<tr>
<td>-508</td>
<td>24504</td>
<td>因为被引用的游标当前不是处于数据行上，所以不能被更新或删除</td>
</tr>
<tr>
<td>-509</td>
<td>42827</td>
<td>除了在游标上指定的那个表（该表由WHERE CURRENT OF语句引用的）以外，再也不能从别的表上更新数据</td>
</tr>
<tr>
<td>-510</td>
<td>42828</td>
<td>表或视图不能被修改</td>
</tr>
<tr>
<td>-511</td>
<td>42829</td>
<td>对不可修改的表或视图，FOR UPDATE OF语句无效</td>
</tr>
<tr>
<td>-512</td>
<td>56023</td>
<td>对远程对象的无效引用</td>
</tr>
<tr>
<td>-513</td>
<td>42924</td>
<td>一个别名不能再被定义成另外的别名</td>
</tr>
<tr>
<td>-514</td>
<td>26501</td>
<td>游标尚没有被准备</td>
</tr>
<tr>
<td>-516</td>
<td>26501</td>
<td>试图描述未准备好的SQL语句</td>
</tr>
<tr>
<td>-517</td>
<td>07005</td>
<td>因为SQL语句尚没有准备好，游标无效</td>
</tr>
<tr>
<td>-518</td>
<td>07003</td>
<td>试图执行尚没有准备好的SQL语句</td>
</tr>
<tr>
<td>-519</td>
<td>24506</td>
<td>当为游标的SQL语句发布一个准备语句是，游标不能是打开的</td>
</tr>
<tr>
<td>-525</td>
<td>51015</td>
<td>不能在已指定的程序包中执行SQL语句，因为在绑定时间内该程序包无效</td>
</tr>
<tr>
<td>-526</td>
<td>42995</td>
<td>在给定的上下文中，不能使用全局的临时表</td>
</tr>
<tr>
<td>-530</td>
<td>23503</td>
<td>对特定的约束名指定了无效的外健值</td>
</tr>
<tr>
<td>-531</td>
<td>23504</td>
<td>从版本5开始，父关键字的多行更新将试图删除一个外关键字依赖的父关键字值，在版本5以前，当引用主关键值外健值当前存在时，试图更新该主健值</td>
</tr>
<tr>
<td>-532</td>
<td>23504</td>
<td>删除操作违反了已指定的参照约束</td>
</tr>
<tr>
<td>-533</td>
<td>21501</td>
<td>多行插入无效，试图将多行插到自我引用的表中</td>
</tr>
<tr>
<td>-534</td>
<td>21502</td>
<td>可改变主健列值的更新语句不能在同一时刻用于更新多行</td>
</tr>
<tr>
<td>-535</td>
<td>21502</td>
<td>当从自我引用表中删除数据或者更新主健列时，不能指定WHERE CURRENT OF。不是版本5的子系统才调用该代码</td>
</tr>
<tr>
<td>-536</td>
<td>42914</td>
<td>因为某一特定表的参照约束存在，所以删除语句无效</td>
</tr>
<tr>
<td>-537</td>
<td>42709</td>
<td>在外健语句或主健语句的规范中，每个列的出现不能多于一次</td>
</tr>
<tr>
<td>-538</td>
<td>42830</td>
<td>无效的外健；不符合引用的表没有主健</td>
</tr>
<tr>
<td>-539</td>
<td>42888</td>
<td>不能定义外健，因为被引用的表没有主健</td>
</tr>
<tr>
<td>-540</td>
<td>57001</td>
<td>表定义不完整，直到为主健建立了唯一索引或UNIQUE语句、或者包含GENERATED BYDEFAULT属性的ROWID列</td>
</tr>
<tr>
<td>-542</td>
<td>42831</td>
<td>可以为空的列不允许作为主健的一部分包含在内</td>
</tr>
<tr>
<td>-543</td>
<td>23511</td>
<td>因为该表是指定了SET NULL删除规则的参照约束的父表而且检查约束不允许NULL，所以DELETE不能发生</td>
</tr>
<tr>
<td>-544</td>
<td>23512</td>
<td>不能用ALTER添加检查约束，因为已存在的某行与该检查约束冲突</td>
</tr>
<tr>
<td>-545</td>
<td>23513</td>
<td>INSERT或者UPDATE导致检查约束冲突</td>
</tr>
<tr>
<td>-546</td>
<td>42621</td>
<td>在CREATE或ALTER TABLE中指定的检查约束无效</td>
</tr>
<tr>
<td>-548</td>
<td>42621</td>
<td>因为指定的列而引起的检查约束无效</td>
</tr>
<tr>
<td>-549</td>
<td>42509</td>
<td>DYNAMICRULES（BIND）计划或程序包的无效SQL语句</td>
</tr>
<tr>
<td>-551</td>
<td>42501</td>
<td>用户试图对不拥有权限的特定的对象进行操作，或者表不存在</td>
</tr>
<tr>
<td>-552</td>
<td>42502</td>
<td>用户试图执行未被授权的操作</td>
</tr>
<tr>
<td>-553</td>
<td>42503</td>
<td>不能指定CURRENT SQLID，因为用户尚没有被允许改变那个ID</td>
</tr>
<tr>
<td>-554</td>
<td>42502</td>
<td>不能对你本身赋予一个权限</td>
</tr>
<tr>
<td>-555</td>
<td>42502</td>
<td>不能对你本身撤销一个权限</td>
</tr>
<tr>
<td>-556</td>
<td>42504</td>
<td>不能撤销用户没有拥有的权限</td>
</tr>
<tr>
<td>-557</td>
<td>42852</td>
<td>指定了不一致的授予或撤销关键词</td>
</tr>
<tr>
<td>-558</td>
<td>56025</td>
<td>为授予或撤销语句指定了无效的语句（一个或一组）</td>
</tr>
<tr>
<td>-559</td>
<td>57002</td>
<td>DB2权限机制已经禁用，授予或者撤销不能被发布</td>
</tr>
<tr>
<td>-567</td>
<td>42501</td>
<td>指定的权限ID缺少对指定的程序包的绑定权限</td>
</tr>
<tr>
<td>-571</td>
<td>25000</td>
<td>不允许多点更新</td>
</tr>
<tr>
<td>-573</td>
<td>42890</td>
<td>不能定义参照约束，因为已指定的父表中在指定的列上没有唯一健</td>
</tr>
<tr>
<td>-574</td>
<td>42864</td>
<td>指定的缺省与列定义冲突</td>
</tr>
<tr>
<td>-577</td>
<td>38002</td>
<td>试图修改用户自定义函数中的数据或者存储过程中的数据，但这些对象的建立没有选择MODIFIES SQL DATA选项</td>
</tr>
<tr>
<td>-579</td>
<td>38004</td>
<td>试图修改用户自定义函数中的数据或者存储过程中的数据，但这些对象的建立没有选择READ SQL DATA选项，也没有选择MODIFIES SQL DATA选项</td>
</tr>
<tr>
<td>-580</td>
<td>42625</td>
<td>CASE表达式中的结果表达式不能都是空的</td>
</tr>
<tr>
<td>-581</td>
<td>42804</td>
<td>CASE表达式中的结果表达式为不兼容的数据类型</td>
</tr>
<tr>
<td>-582</td>
<td>42625</td>
<td>SEARCHED－WHEN－CLAUSE中的查找条件指定了一个限定的、IN或EXISTS谓词</td>
</tr>
<tr>
<td>-583</td>
<td>42845</td>
<td>指定的函数失败，因为他不是决定性的，或者可能有外部动作</td>
</tr>
<tr>
<td>-585</td>
<td>42732</td>
<td>在当前路径中模式名不止一次出现</td>
</tr>
<tr>
<td>-586</td>
<td>42907</td>
<td>CURRENT PATH专用寄存器在长度上不能超过254字符</td>
</tr>
<tr>
<td>-587</td>
<td>428C6</td>
<td>项目引用的列表必须是同一个家族</td>
</tr>
<tr>
<td>-590</td>
<td>42734</td>
<td>在命名的存储过程或用户自定义的函数中的参数必须是独一无二的</td>
</tr>
<tr>
<td>-592</td>
<td>42510</td>
<td>没有授权权限，让你在WLM环境中建立的存储过程或者用户自定义函数</td>
</tr>
<tr>
<td>-601</td>
<td>42710</td>
<td>试图创建（或重命名）已经存在的对象</td>
</tr>
<tr>
<td>-602</td>
<td>54008</td>
<td>CREATE INDEX语句中指定的列太多</td>
</tr>
<tr>
<td>-603</td>
<td>23515</td>
<td>因为发现有重复值，所以不能建立唯一的索引</td>
</tr>
<tr>
<td>-604</td>
<td>42611</td>
<td>在CREATE或ALTER TABLE语句中的为数据类型指定的长度、精度以及标度无效</td>
</tr>
<tr>
<td>-607</td>
<td>42832</td>
<td>指定的INSERT、UPDATE或DELETE语句不能被发布，应为这些语句对DB2 CATLOG表执行写操作</td>
</tr>
<tr>
<td>-611</td>
<td>53088</td>
<td>当LOCKSIZE是TABLE或者TABLESPACE时，LOCKMAX必须为0</td>
</tr>
<tr>
<td>-612</td>
<td>42711</td>
<td>在同一个表、索引或试图中不允许有重复列名</td>
</tr>
<tr>
<td>-613</td>
<td>54008</td>
<td>主健或UNIQUE约束太长或者包含了太多的列</td>
</tr>
<tr>
<td>-614</td>
<td>54008</td>
<td>已经超过了索引的内部健长度的最大长度（255）限制</td>
</tr>
<tr>
<td>-615</td>
<td>55006</td>
<td>不能删除这个程序包，因为该程序包目前正在执行</td>
</tr>
<tr>
<td>-616</td>
<td>42893</td>
<td>指定的对象不能被删除，因为其他对象依赖于该对象</td>
</tr>
<tr>
<td>-617</td>
<td>56089</td>
<td>对于DB2版本6，1型索引无效。对于以前的版本，1型索引不能用LOCKSIZE ROW或LARGE表空间定义</td>
</tr>
<tr>
<td>-618</td>
<td>42832</td>
<td>对DB2 CATALOG表的请求操作时不允许的</td>
</tr>
<tr>
<td>-619</td>
<td>55011</td>
<td>DSNDB07不能修改，除非他先被停止了</td>
</tr>
<tr>
<td>-620</td>
<td>53001</td>
<td>对在DSNDB07中的表空间不允许指定该关键词</td>
</tr>
<tr>
<td>-621</td>
<td>58001</td>
<td>遇到了重复的DBID，遇到了系统问题</td>
</tr>
<tr>
<td>-622</td>
<td>56031</td>
<td>不能指定FOR MIXED DATA因为没有安装混合数据选项</td>
</tr>
<tr>
<td>-623</td>
<td>55012</td>
<td>不能为单一的表定义多个族索引</td>
</tr>
<tr>
<td>-624</td>
<td>42889</td>
<td>不能为单一的表定义多个主健</td>
</tr>
<tr>
<td>-625</td>
<td>55014</td>
<td>用主健定义的表要求唯一索引</td>
</tr>
<tr>
<td>-626</td>
<td>55015</td>
<td>不能发布ALTER语句来改变PRIQTY SECQTY或ERASE，除非先停止了表空间</td>
</tr>
<tr>
<td>-627</td>
<td>55016</td>
<td>不能发布ALTER语句来改变PRIQTY SECQTY或ERASE，除非先把表空间定义为使用存储器组的表空间</td>
</tr>
<tr>
<td>-628</td>
<td>42613</td>
<td>指定语句时相互排斥的（例如，不能分区一个分段的表空间）</td>
</tr>
<tr>
<td>-629</td>
<td>42834</td>
<td>因为该外健不能包含空值，所以SET NULL无效</td>
</tr>
<tr>
<td>-630</td>
<td>56089</td>
<td>不能为1型索引指定WHERE NOT NULL</td>
</tr>
<tr>
<td>-631</td>
<td>54008</td>
<td>无效的外健；要么是比254个字节长，要么包含的列数多于40</td>
</tr>
<tr>
<td>-632</td>
<td>42915</td>
<td>指定的删除规则禁止把这个表定义为已制定表的从属表</td>
</tr>
<tr>
<td>-633</td>
<td>42915</td>
<td>无效删除规则；必须使用特定的强制删除规则</td>
</tr>
<tr>
<td>-634</td>
<td>42915</td>
<td>在这种情况下，DELETE CASCADE不允许</td>
</tr>
<tr>
<td>-635</td>
<td>42915</td>
<td>删除规则不能有差异或者不能为SET NULL</td>
</tr>
<tr>
<td>-636</td>
<td>56016</td>
<td>在分区索引健的升序或降序规范中，分区所以必须与该规范一致</td>
</tr>
<tr>
<td>-637</td>
<td>42614</td>
<td>遇到重复的关键词</td>
</tr>
<tr>
<td>-638</td>
<td>42601</td>
<td>在CREATE TABLE语句中缺少列定义</td>
</tr>
<tr>
<td>-639</td>
<td>56027</td>
<td>带有SET NULL的删除规则的外健的可空列不能是分区索引的列</td>
</tr>
<tr>
<td>-640</td>
<td>56089</td>
<td>不能为这个表空间指定LOCKSIZE ROW，因为在该表空间中的表上定义了1型索引</td>
</tr>
<tr>
<td>-642</td>
<td>54021</td>
<td>唯一约束包含太多的列</td>
</tr>
<tr>
<td>-643</td>
<td>54024</td>
<td>检查约束超出了3800个字符的最大长度</td>
</tr>
<tr>
<td>-644</td>
<td>42615</td>
<td>在SQL语句中为关键词指定的值无效</td>
</tr>
<tr>
<td>-646</td>
<td>55017</td>
<td>在指定的分区表空间或者缺省表空间中不能创建表，因为指定的表空间已经包含了一个表</td>
</tr>
<tr>
<td>-647</td>
<td>57003</td>
<td>指定的缓冲池无效，因为他没有被激活</td>
</tr>
<tr>
<td>-650</td>
<td>56090</td>
<td>ALTER INDEX不能被执行；提供了原因代码</td>
</tr>
<tr>
<td>-651</td>
<td>54025</td>
<td>如果CREARE或ALTER TABLE被允许，表对象的描述词（object descriptor,OBD）将超过最大值（32KB）</td>
</tr>
<tr>
<td>-652</td>
<td>23506</td>
<td>遇到了EDITRPROC或VALIDPROC冲突</td>
</tr>
<tr>
<td>-653</td>
<td>57004</td>
<td>在分区表空间中的表不可用，因为分区索引尚未被创建</td>
</tr>
<tr>
<td>-655</td>
<td>56036</td>
<td>在卷的列表中，STOGROUP不能指定为特定的或不特定（“*”）的卷</td>
</tr>
<tr>
<td>-658</td>
<td>42917</td>
<td>当试图删除指定的对象时，无法删除该对象，该对象的删除必须通过删除与之相关联的对象完成</td>
</tr>
<tr>
<td>-660</td>
<td>53035</td>
<td>不正确的分区索引规范，必须为族索引定义有限制的关键字</td>
</tr>
<tr>
<td>-661</td>
<td>53036</td>
<td>分区索引没有指定恰当的分区数目</td>
</tr>
<tr>
<td>-662</td>
<td>53037</td>
<td>试图在未分区的表空间（分段的或简单的）上建立分区索引</td>
</tr>
<tr>
<td>-663</td>
<td>53038</td>
<td>为分区索引指定的关键字限制值是一个无效数字</td>
</tr>
<tr>
<td>-665</td>
<td>53039</td>
<td>为ALTER TABLESOACE语句指定了无效的PART语句</td>
</tr>
<tr>
<td>-666</td>
<td>57005</td>
<td>SQL语句不能被处理，因为指定的函数当前正处于进行过程中</td>
</tr>
<tr>
<td>-667</td>
<td>42917</td>
<td>不能明确的删除分区表空间的族索引，必须除去分区表空间来去掉分区索引</td>
</tr>
<tr>
<td>-668</td>
<td>56018</td>
<td>不能向用EDITPROC定义的表中添加列</td>
</tr>
<tr>
<td>-669</td>
<td>42917</td>
<td>不能显式的删除分区表空间中的表，必须删除分区表空间来删除表</td>
</tr>
<tr>
<td>-670</td>
<td>54010</td>
<td>表的记录长度超过了页面的大小</td>
</tr>
<tr>
<td>-671</td>
<td>53040</td>
<td>不能更改指定的表空间的缓冲池，因为这将改变表空间的页面大小</td>
</tr>
<tr>
<td>-672</td>
<td>55035</td>
<td>在命名的表上不允许DROP</td>
</tr>
<tr>
<td>-676</td>
<td>53041</td>
<td>只有4KB的缓冲池可被用于一个索引</td>
</tr>
<tr>
<td>-677</td>
<td>57011</td>
<td>缓冲池扩展失败，由于可用的虚拟内存的大小不足</td>
</tr>
<tr>
<td>-678</td>
<td>53045</td>
<td>为才分区索引中指定的限制健提供的值与数据类型不符</td>
</tr>
<tr>
<td>-679</td>
<td>57006</td>
<td>不能创建某一个特定对象，因为该对象的一个drop目前正在挂起</td>
</tr>
<tr>
<td>-680</td>
<td>54011</td>
<td>对DB2表不能超过750列</td>
</tr>
<tr>
<td>-681</td>
<td>23507</td>
<td>列违反了指定的FIELDPROC</td>
</tr>
<tr>
<td>-682</td>
<td>57010</td>
<td>不能载入FIELDPROC</td>
</tr>
<tr>
<td>-683</td>
<td>42842</td>
<td>列、单值类型、函数或者过程无效，因为不兼容语句。例如，指定的INTEGER具有FORBITDATA选项</td>
</tr>
<tr>
<td>-684</td>
<td>54012</td>
<td>指定的文字列表不能超过254个字节</td>
</tr>
<tr>
<td>-685</td>
<td>58002</td>
<td>FIELDPROC返回一个无效的域描述</td>
</tr>
<tr>
<td>-686</td>
<td>53043</td>
<td>用FIELDPROC定义的一个列不能与一个使用不同的FIELDPROC定义的列作比较</td>
</tr>
<tr>
<td>-687</td>
<td>53044</td>
<td>列不能与一个非兼容字段类型的列比较</td>
</tr>
<tr>
<td>-688</td>
<td>58002</td>
<td>返回不正确的数据</td>
</tr>
<tr>
<td>-689</td>
<td>54011</td>
<td>从属表定义了太多的列</td>
</tr>
<tr>
<td>-690</td>
<td>23508</td>
<td>数据定义的控制支持拒绝这个语句</td>
</tr>
<tr>
<td>-691</td>
<td>57018</td>
<td>命名的注册表不存在</td>
</tr>
<tr>
<td>-692</td>
<td>57018</td>
<td>命名的索引不存在，但命名的注册表需要该索引</td>
</tr>
<tr>
<td>-693</td>
<td>55003</td>
<td>命名的注册表/索引的命名列无效</td>
</tr>
<tr>
<td>-694</td>
<td>57023</td>
<td>DROP正在命名的注册表上挂起</td>
</tr>
<tr>
<td>-696</td>
<td>42898</td>
<td>由于相关的名字或者转换表的名字使用不正确，指定的触发器无效</td>
</tr>
<tr>
<td>-697</td>
<td>42899</td>
<td>FOR EACH语句被指定，因此与OLD合NEW相关的名字是不允许的，或者不能为一个BEFORE触发器指定OLD_TABLE和NEW_TABLE</td>
</tr>
<tr>
<td>-713</td>
<td>42815</td>
<td>指定的专用寄存器是无效的</td>
</tr>
<tr>
<td>-715</td>
<td>56064</td>
<td>命名的程序不能被运行，因为他依赖与你所安装的DB2版本的部件，但是你的数据中心没有安装这个部件</td>
</tr>
<tr>
<td>-716</td>
<td>56065</td>
<td>命名的程序使用这个版本的不正确的发行版本做了预编译</td>
</tr>
<tr>
<td>-717</td>
<td>56066</td>
<td>BIND失败，因为他依赖与你所安装的DB2版本的部件，但是你的数据中心没有安装这个部件</td>
</tr>
<tr>
<td>-718</td>
<td>56067</td>
<td>REBIND失败，因为IBMREQD列无效</td>
</tr>
<tr>
<td>-719</td>
<td>42710</td>
<td>不能BIND ADD一个已经存在的程序包</td>
</tr>
<tr>
<td>-720</td>
<td>42710</td>
<td>不能BIND REPLACE一个已经存在的程序包版本</td>
</tr>
<tr>
<td>-721</td>
<td>42710</td>
<td>程序包的一致性记号必须是独一无二的</td>
</tr>
<tr>
<td>-722</td>
<td>42704</td>
<td>绑定错误，因为指定的程序包不存在</td>
</tr>
<tr>
<td>-723</td>
<td>09000</td>
<td>一个触发的SQL语句接受到一个错误</td>
</tr>
<tr>
<td>-724</td>
<td>54038</td>
<td>达到了（16）级联间接的SQL语句的最大项目</td>
</tr>
<tr>
<td>-725</td>
<td>42721</td>
<td>对专门指定的寄存器提供了一个无效值</td>
</tr>
<tr>
<td>-726</td>
<td>55030</td>
<td>因为SYSPKSYSTEM条目，不能绑定这个程序包</td>
</tr>
<tr>
<td>-728</td>
<td>56080</td>
<td>指定的数据类型不能与私有协议发布一起使用</td>
</tr>
<tr>
<td>-729</td>
<td>429B1</td>
<td>用COMMIT ON RETURN定义的存储过程不能用作嵌套的CALL过程的目标</td>
</tr>
<tr>
<td>-730</td>
<td>56053</td>
<td>在只读的共享数据库中为表定义的参照完整性无效</td>
</tr>
<tr>
<td>-731</td>
<td>56054</td>
<td>VSAM数据集必须用SHAREOPTION（1.3）定义</td>
</tr>
<tr>
<td>-732</td>
<td>56055</td>
<td>被定义为只读型数据库却拥有没有定义空间或者索引空间的DB2子系统</td>
</tr>
<tr>
<td>-733</td>
<td>56056</td>
<td>只读共享数据库的定义不一致</td>
</tr>
<tr>
<td>-734</td>
<td>56057</td>
<td>一旦一个数据库被定义为ROSHARE READ，他将不能被更改为其他不同的ROSHARE状态</td>
</tr>
<tr>
<td>-735</td>
<td>55004</td>
<td>用DBID名称标识的数据库不再是一个只读共享数据库</td>
</tr>
<tr>
<td>-736</td>
<td>53014</td>
<td>命名的DBID无效</td>
</tr>
<tr>
<td>-737</td>
<td>53056</td>
<td>在这种状况下，不能建立一个隐含的表空间</td>
</tr>
<tr>
<td>-739</td>
<td>56088</td>
<td>因为同时指定了ALLOW PARALLEL和MODIELES SQL DATA这两个语句，因此已设定的函数将不能再被更改</td>
</tr>
<tr>
<td>-740</td>
<td>51034</td>
<td>在这种方式下不能用MODIELES SQL DATA定义指定的函数</td>
</tr>
<tr>
<td>-741</td>
<td>55030</td>
<td>已经为命名的共享组成员的数据定义了工作文件数据库</td>
</tr>
<tr>
<td>-742</td>
<td>53004</td>
<td>DSNDB07是隐含的工作文件数据库</td>
</tr>
<tr>
<td>-746</td>
<td>57053</td>
<td>在特定的触发器、存储过程或函数中的SQL语句违反嵌套SQL限制</td>
</tr>
<tr>
<td>-747</td>
<td>57054</td>
<td>指定的表是不可用的除非为LOB数据列建立起必须的辅助表</td>
</tr>
<tr>
<td>-748</td>
<td>54042</td>
<td>在指定的辅助表上已经有一个索引</td>
</tr>
<tr>
<td>-750</td>
<td>42986</td>
<td>不能对已指定的表重新命名,因为他至少在一个现存的视图或触发器中被引用</td>
</tr>
<tr>
<td>-751</td>
<td>42987</td>
<td>存储过程或用户自定义的函数试图执行一个不允许执行的SQL语句。DB2的线程被置于MUST_ROLLBACK状态</td>
</tr>
<tr>
<td>-752</td>
<td>0A001</td>
<td>无效CONNECT语句</td>
</tr>
<tr>
<td>-763</td>
<td>560A1</td>
<td>无效的表空间名</td>
</tr>
<tr>
<td>-764</td>
<td>560A2</td>
<td>LOB表空间必须与其相关的基表空间同在一个数据库中</td>
</tr>
<tr>
<td>-765</td>
<td>560A3</td>
<td>表和数据库不兼容</td>
</tr>
<tr>
<td>-766</td>
<td>560A4</td>
<td>不能对辅助表进行请求的操作</td>
</tr>
<tr>
<td>-767</td>
<td>42626</td>
<td>CREATE INDEX失败，因为在辅助表中为索引指定了列，或者因为没有为非辅助表的索引指定列</td>
</tr>
<tr>
<td>-768</td>
<td>560A5</td>
<td>不能为指定的列或者指定的分区建立辅助表，因为其辅助表已经存在</td>
</tr>
<tr>
<td>-769</td>
<td>53096</td>
<td>CREATE AUX TABLE的规格与基表不匹配</td>
</tr>
<tr>
<td>-770</td>
<td>530A6</td>
<td>指定的表必须有一个ROWID列，那么该表才可以包含一个LOB列</td>
</tr>
<tr>
<td>-771</td>
<td>428C7</td>
<td>无效的ROWID列规范</td>
</tr>
<tr>
<td>-797</td>
<td>42987</td>
<td>CREATE TRIGGER包含不被支持的语法</td>
</tr>
<tr>
<td>-798</td>
<td>428C9</td>
<td>不能把一个值插入到用GENERATED ALWAYS定义的ROWID列</td>
</tr>
<tr>
<td>-802</td>
<td>22012</td>
<td>某一特定操作发生了异常错误,被零除</td>
</tr>
<tr>
<td>-803</td>
<td>23505</td>
<td>不能插入行，因为这将违反唯一索引的约束</td>
</tr>
<tr>
<td>-804</td>
<td>07002</td>
<td>SQLDA的调用参数列表有误</td>
</tr>
<tr>
<td>-805</td>
<td>51002</td>
<td>在计划中没有发现DBRM或程序包名</td>
</tr>
<tr>
<td>-807</td>
<td>23509</td>
<td>对已指定的环境和连接，该程序包不可用</td>
</tr>
<tr>
<td>-808</td>
<td>08001</td>
<td>CONECT语句与程序中的第一个CONNECT语句不一致</td>
</tr>
<tr>
<td>-811</td>
<td>21000</td>
<td>当多行作为一内嵌的选择语句的返回结果是，必须使用游标</td>
</tr>
<tr>
<td>-812</td>
<td>22508</td>
<td>在CURRENT PACKAGESET中的ID集合是空白的，语句不能被执行</td>
</tr>
<tr>
<td>-815</td>
<td>42920</td>
<td>在一个内置选择语句或者一个基本谓词的子查询中，显式的或隐含的指定了GROUP BY或HAVING语句</td>
</tr>
<tr>
<td>-817</td>
<td>25000</td>
<td>执行SQL语句将可能导致禁止更新用户数据或DB2编目</td>
</tr>
<tr>
<td>-818</td>
<td>05103</td>
<td>划&lt;－&gt;载入组件的时间戳不匹配，在执行计划中没有从同一个预编译中建立DBRM，该预编译是作为组件载入的</td>
</tr>
<tr>
<td>-819</td>
<td>58004</td>
<td>视图不能重建，因为在DB2编目中存储的分析树长度为0</td>
</tr>
<tr>
<td>-820</td>
<td>58004</td>
<td>在这个DB2版本的DB2编目中遇到了无效值</td>
</tr>
<tr>
<td>-822</td>
<td>51004</td>
<td>在SQLDA中遇到了无效地址</td>
</tr>
<tr>
<td>-840</td>
<td>54004</td>
<td>在选择列表或插入列表中返回的项目太多</td>
</tr>
<tr>
<td>-842</td>
<td>08002</td>
<td>到指定位置的连接已经存在</td>
</tr>
<tr>
<td>-843</td>
<td>08003</td>
<td>SET CONNECTION或RELEASE语句无法执行，因为连接不存在</td>
</tr>
<tr>
<td>-870</td>
<td>58026</td>
<td>宿主变量描述符的个数不等于语句中宿主变量的个数</td>
</tr>
<tr>
<td>-872</td>
<td>51302</td>
<td>这个子系统已指定了有效的CCSID</td>
</tr>
<tr>
<td>-873</td>
<td>53090</td>
<td>同一SQL语句中，不能同时引用EBCDIC表中的定义的列和ASCII表中定义的列</td>
</tr>
<tr>
<td>-874</td>
<td>53901</td>
<td>指定对象的编码方案与其表空间的编码方案不匹配</td>
</tr>
<tr>
<td>-875</td>
<td>42988</td>
<td>指定的操作符不能用于ASCII数据</td>
</tr>
<tr>
<td>-876</td>
<td>53092</td>
<td>不能为指定的原因创建对象：提供了原因代码</td>
</tr>
<tr>
<td>-877</td>
<td>53093</td>
<td>数据库或表空间不允许用ASCII，必须使用EBCDIC</td>
</tr>
<tr>
<td>-878</td>
<td>53094</td>
<td>该PLAN——TABLE不能是ASCII，必须使用EBCDIC</td>
</tr>
<tr>
<td>-879</td>
<td>53095</td>
<td>指定对象的CREATE或ALTER语句不能将列、单值类型，某个存储过程或用户自定义函数的参数定义为以下类型：MAXED DATA，GRAPHIC，VARGRAPHIC，LONGVARGRAPHIC，因为系统没有为指定的编码方案定义相应的CCSID</td>
</tr>
<tr>
<td>-900</td>
<td>08003</td>
<td>应用处理没有连接到应用服务器，语句不能被执行</td>
</tr>
<tr>
<td>-901</td>
<td>58004</td>
<td>遇到时断时续的系统错误，该错误不能抑制后继的SQL语句的执行</td>
</tr>
<tr>
<td>-902</td>
<td>58005</td>
<td>内部控制块的指针错误，要求重新绑定</td>
</tr>
<tr>
<td>-904</td>
<td>57011</td>
<td>指定的资源不可用</td>
</tr>
<tr>
<td>-905</td>
<td>57014</td>
<td>超出了资源上限</td>
</tr>
<tr>
<td>-906</td>
<td>51005</td>
<td>因为重大错误，SQL语句无法执行</td>
</tr>
<tr>
<td>-908</td>
<td>23510</td>
<td>当前资源限制设施的规范或者自动重绑定的系统参数不允许BIND，REBIND，AUTOREBIND</td>
</tr>
<tr>
<td>-909</td>
<td>57007</td>
<td>对象已被删除</td>
</tr>
<tr>
<td>-910</td>
<td>57007</td>
<td>因为在该对象上挂起DROP，所以不能访问该对象</td>
</tr>
<tr>
<td>-911</td>
<td>40001</td>
<td>当前工作单元已被回滚</td>
</tr>
<tr>
<td>-913</td>
<td>57033</td>
<td>因为死锁或超时导致不成功执行</td>
</tr>
<tr>
<td>-917</td>
<td>42969</td>
<td>绑定程序包已经失败</td>
</tr>
<tr>
<td>-918</td>
<td>51021</td>
<td>SQL语句不能被执行，因为连接丢失</td>
</tr>
<tr>
<td>-919</td>
<td>56045</td>
<td>需要一个ROLLBACK</td>
</tr>
<tr>
<td>-922</td>
<td>42505</td>
<td>连接权限失败。试图从TSO、CICS或IMS访问DB2，同时相应的连接设施处于非活动的状态</td>
</tr>
<tr>
<td>-923</td>
<td>57015</td>
<td>因为DB2不可用，所以不能建立连接</td>
</tr>
<tr>
<td>-924</td>
<td>58006</td>
<td>遇到了DB2内部的连接错误：提供了原因代码</td>
</tr>
<tr>
<td>-925</td>
<td>2D521</td>
<td>SQL的COMMIT语句不能从CICS或IMS/TM发布</td>
</tr>
<tr>
<td>-926</td>
<td>2D521</td>
<td>SQL的ROLLBACK语句不能从CICS或IMS/TM发布</td>
</tr>
<tr>
<td>-927</td>
<td>51006</td>
<td>当正在连接的环境没有建立时，语言接口被调用。利用DSN命令激发该程序</td>
</tr>
<tr>
<td>-929</td>
<td>58002</td>
<td>数据获取退出已经失败（DPROP）</td>
</tr>
<tr>
<td>-939</td>
<td>51021</td>
<td>由于远程服务器的未请求的回滚，要求一个回滚</td>
</tr>
<tr>
<td>-947</td>
<td>56038</td>
<td>SQL语句失败，因为更新不能被传播（DPROP）</td>
</tr>
<tr>
<td>-948</td>
<td>56062</td>
<td>DDF没有启动，分布式操作无效</td>
</tr>
<tr>
<td>-950</td>
<td>42705</td>
<td>在SQL语句中指定的位置在SYSIBM.LOCATIONS中没有定义</td>
</tr>
<tr>
<td>-965</td>
<td>51021</td>
<td>存储过程非正常终止（在DB2 6之前的版本）</td>
</tr>
<tr>
<td>-981</td>
<td>57015</td>
<td>当前不是处于允许SQL的状态时，试图在RRSAF中执行SQL</td>
</tr>
<tr>
<td>-991</td>
<td>57015</td>
<td>调用连接不能建立一个到DB2的隐含或开放连接</td>
</tr>
<tr>
<td>-1773</td>
<td>null</td>
<td>在 HADR 数据库下不支持的操作（如备库可能不支持写操作）</td>
</tr>
<tr>
<td>-2001</td>
<td>53089</td>
<td>为储存过程指定的宿主变量参数的个数不等于预期的参数个数</td>
</tr>
<tr>
<td>-20003</td>
<td>560A7</td>
<td>不能为GRECP中的表空间或索引指定GBPCACHE NONE</td>
</tr>
<tr>
<td>-20004</td>
<td>560A8</td>
<td>对于WORKFILE对象。8KB或16Kb的缓冲池页面大小无效</td>
</tr>
<tr>
<td>-20005</td>
<td>54035</td>
<td>指定的对象类型超出了内部的ID极限</td>
</tr>
<tr>
<td>-20006</td>
<td>53097</td>
<td>当没有指定WLM环境时，LOB不能被指定为参数</td>
</tr>
<tr>
<td>-20070</td>
<td>53098</td>
<td>不能非LOB列建立一个辅助表</td>
</tr>
<tr>
<td>-20071</td>
<td>53099</td>
<td>必须指定WLM环境名</td>
</tr>
<tr>
<td>-20072</td>
<td>56052</td>
<td>指定的权限ID不拥有在触发器程序包上执行BIND所需的权限</td>
</tr>
<tr>
<td>-20073</td>
<td>42927</td>
<td>不能按照指定的要求更改命名的函数，因为在现存的视图定义中引用了该函数</td>
</tr>
<tr>
<td>-20074</td>
<td>42939</td>
<td>不能建立指定的对象，因为“SYS”是一个保留的前缀</td>
</tr>
<tr>
<td>-20100</td>
<td>56059</td>
<td>在被触发的SQL语句中有BIND错误，指定了错误的SQLCODE和SQLSTATE</td>
</tr>
<tr>
<td>-20101</td>
<td>56059</td>
<td>由于指定的原因代码，该函数失败</td>
</tr>
<tr>
<td>-20102</td>
<td>42849</td>
<td>在CREATE或ALTER FUNCTION语句中不能使用指定的选项</td>
</tr>
<tr>
<td>-20104</td>
<td>42856</td>
<td>更改一个CCSID失败</td>
</tr>
<tr>
<td>-20106</td>
<td>42945</td>
<td>不能改变表空间或数据库的CCSID，因为现存的试图引用</td>
</tr>
<tr>
<td>-30000</td>
<td>58008</td>
<td>DRDA分布协议错误；处理可以继续</td>
</tr>
<tr>
<td>-30002</td>
<td>57057</td>
<td>使用DRDA的分布式客户把OPEN语句连接到PREPARE，但PREPARE接受到一个SQLCODE为＋495的警告</td>
</tr>
<tr>
<td>-30020</td>
<td>58009</td>
<td>DRDA分布协议错误；对话被解除</td>
</tr>
<tr>
<td>-30021</td>
<td>58010</td>
<td>DRDA分布协议错误；处理不能继续</td>
</tr>
<tr>
<td>-30030</td>
<td>58013</td>
<td>违反分布协议：COMMIT不成功，对话被解除（AS）</td>
</tr>
<tr>
<td>-30040</td>
<td>57012</td>
<td>因为不能得到资源，执行失败，处理可以继续（AS）</td>
</tr>
<tr>
<td>-30041</td>
<td>57013</td>
<td>因为不能得到资源，执行失败，处理不能成功的继续（AS）</td>
</tr>
<tr>
<td>-30050</td>
<td>58011</td>
<td>执行不成功，在BIND过程中不能执行语句</td>
</tr>
<tr>
<td>-30051</td>
<td>58012</td>
<td>特定的BIND过程不是处于活动状态（远程BIND），从而导致失败</td>
</tr>
<tr>
<td>-30052</td>
<td>42932</td>
<td>程序准备的假设错误</td>
</tr>
<tr>
<td>-30053</td>
<td>42506</td>
<td>程序包的拥有者遭遇授权失败</td>
</tr>
<tr>
<td>-30060</td>
<td>08004</td>
<td>RBD遭遇授权失败</td>
</tr>
<tr>
<td>-30061</td>
<td>08004</td>
<td>指定了无效或者没有存在的RDB</td>
</tr>
<tr>
<td>-30070</td>
<td>58014</td>
<td>目标子系统不支持这个命令</td>
</tr>
<tr>
<td>-30071</td>
<td>58015</td>
<td>目标子系统不支持这个对象</td>
</tr>
<tr>
<td>-30072</td>
<td>58016</td>
<td>目标子系统不支持这个参数</td>
</tr>
<tr>
<td>-30073</td>
<td>58017</td>
<td>目标子系统不支持这个参数值</td>
</tr>
<tr>
<td>-30074</td>
<td>58018</td>
<td>应答信息不被支持</td>
</tr>
<tr>
<td>-30080</td>
<td>08001</td>
<td>SNA通信错误</td>
</tr>
<tr>
<td>-30081</td>
<td>58019</td>
<td>TCP/IP通信错误</td>
</tr>
<tr>
<td>-30082</td>
<td>08001</td>
<td>由于安全冲突、通信失败：提供了原因代码</td>
</tr>
<tr>
<td>-30090</td>
<td>25000</td>
<td>指定的操作对远程执行失败</td>
</tr>
<tr>
<td>-30104</td>
<td>56095</td>
<td>在绑定选项与绑定值中有错误</td>
</tr>
<tr>
<td>-30105</td>
<td>56096</td>
<td>指定的绑定选项不兼容</td>
</tr>
</tbody></table>

      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

      
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="zh-CN">
    <link itemprop="mainEntityOfPage" href="http://example.com/2021/01/15/DB2%E6%95%B0%E6%8D%AE%E6%97%A0%E6%B3%95%E5%AF%BC%E5%85%A5/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/00-00-00.JPG">
      <meta itemprop="name" content="severus">
      <meta itemprop="description" content="正在享受无法回避的痛苦">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Sary.severus`s blog">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          
            <a href="/2021/01/15/DB2%E6%95%B0%E6%8D%AE%E6%97%A0%E6%B3%95%E5%AF%BC%E5%85%A5/" class="post-title-link" itemprop="url">未命名</a>
        </h2>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">发表于</span>

              <time title="创建时间：2021-01-15 14:28:30" itemprop="dateCreated datePublished" datetime="2021-01-15T14:28:30+08:00">2021-01-15</time>
            </span>

          

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <h1 id="wDB2数据无法导入"><a href="#wDB2数据无法导入" class="headerlink" title="wDB2数据无法导入"></a>wDB2数据无法导入</h1><hr>
<p>在对表结构进行导入后，开始导入表数据；但是数据无法导入并报错</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><span class="line">SQL3550W The field value <span class="keyword">in</span> row <span class="string">&quot;1&quot;</span> and column <span class="string">&quot;1&quot;</span> is not NULL, but the</span><br><span class="line">target column has been defined as GENERATED ALWAYS.</span><br><span class="line"></span><br><span class="line">SQL3550W The field value <span class="keyword">in</span> row <span class="string">&quot;2&quot;</span> and column <span class="string">&quot;1&quot;</span> is not NULL, but the</span><br><span class="line">target column has been defined as GENERATED ALWAYS.</span><br><span class="line"></span><br><span class="line">SQL3550W The field value <span class="keyword">in</span> row <span class="string">&quot;3&quot;</span> and column <span class="string">&quot;1&quot;</span> is not NULL, but the</span><br><span class="line">target column has been defined as GENERATED ALWAYS.</span><br><span class="line"></span><br><span class="line">SQL3110N The utility has completed processing. <span class="string">&quot;14&quot;</span> rows were <span class="built_in">read</span> from the</span><br><span class="line">input file.</span><br><span class="line"></span><br><span class="line">SQL3221W ...Begin COMMIT WORK. Input Record Count = <span class="string">&quot;14&quot;</span>.</span><br><span class="line"></span><br><span class="line">SQL3222W ...COMMIT of any database changes was successful.</span><br><span class="line"></span><br><span class="line">SQL3149N <span class="string">&quot;14&quot;</span> rows were processed from the input file. <span class="string">&quot;0&quot;</span> rows were</span><br><span class="line">successfully inserted into the table. <span class="string">&quot;14&quot;</span> rows were rejected.</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">Number of rows <span class="built_in">read</span> = 14</span><br><span class="line">Number of rows skipped = 0</span><br><span class="line">Number of rows inserted = 0</span><br><span class="line">Number of rows updated = 0</span><br><span class="line">Number of rows rejected = 14</span><br><span class="line">Number of rows committed = 14</span><br><span class="line"></span><br></pre></td></tr></table></figure>


<p>原因是由于表中的ID为自增序列，在导入表数据时，增肌一个参数即可</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">load from 文件名.ixf of ixf modified by identityoverride insert into 表名</span><br><span class="line">load from 文件名.ixf of ixf modified by identityignore insert into 表名</span><br></pre></td></tr></table></figure>

      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

      
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="zh-CN">
    <link itemprop="mainEntityOfPage" href="http://example.com/2021/01/15/DB2%E8%A1%A8%E7%A9%BA%E9%97%B4%E6%89%A9%E5%AE%B9/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/00-00-00.JPG">
      <meta itemprop="name" content="severus">
      <meta itemprop="description" content="正在享受无法回避的痛苦">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Sary.severus`s blog">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          
            <a href="/2021/01/15/DB2%E8%A1%A8%E7%A9%BA%E9%97%B4%E6%89%A9%E5%AE%B9/" class="post-title-link" itemprop="url">未命名</a>
        </h2>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">发表于</span>

              <time title="创建时间：2021-01-15 14:28:30" itemprop="dateCreated datePublished" datetime="2021-01-15T14:28:30+08:00">2021-01-15</time>
            </span>

          

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <h1 id="DB2表空间扩容"><a href="#DB2表空间扩容" class="headerlink" title="DB2表空间扩容"></a>DB2表空间扩容</h1><ol>
<li>查看表空间信息</li>
</ol>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">## 连接数据库</span></span><br><span class="line"></span><br><span class="line">db2 connect to [数据库名]</span><br><span class="line"></span><br><span class="line"><span class="comment">## 查看数据库表空间详细信息</span></span><br><span class="line"></span><br><span class="line">db2 list tablespaces show detail</span><br></pre></td></tr></table></figure>
<ol start="2">
<li>通过查询得到的表空间ID查询表空间容器信息</li>
</ol>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">## 查看指定表空间容器信息</span></span><br><span class="line"></span><br><span class="line">db2 list tablespace containers <span class="keyword">for</span> [表空间ID] show detail</span><br><span class="line"></span><br><span class="line"><span class="comment"># 可以获得表空间文件路径</span></span><br></pre></td></tr></table></figure>
<ol start="3">
<li>计算已使用表空间百分比</li>
</ol>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">Used Pages &#x2F; Total Pages * 100</span><br></pre></td></tr></table></figure>
<ol start="4">
<li>通过容器信息获取的路径信息获取文件系统可用空间</li>
</ol>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">## 查询可用空间大小</span></span><br><span class="line"></span><br><span class="line">df -k [表空间文件路径]</span><br></pre></td></tr></table></figure>
<ol start="5">
<li><p>扩展表空间，以扩展100页为例</p>
<p> 扩展表空间实则扩展表空间下容器，该命令实现的是对该表空间下所有容器进行100页大小扩展</p>
</li>
</ol>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># db2 &quot;alter tablespace TABLESPACE.NAME entend (all SIZE)&quot;</span></span><br><span class="line">db2 <span class="string">&quot;alter tablespace [表空间名] extend (all 10G)&quot;</span></span><br></pre></td></tr></table></figure>
<p>​    或者，如果不可能扩展实际的容器，则可能是向表空间添加新的容器，可执行如下命令</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># db2 &quot;alter tablespace TABLESPACE.NAME add (FILE &#x27;NEW.CONTAINER.FILE&#x27; SIZE)&quot;</span></span><br><span class="line">db2 <span class="string">&quot;alter tablespace TABLESPACE.NAME add (FILE &#x27;/database/Tablespace/new_container&#x27; 10G)&quot;</span></span><br></pre></td></tr></table></figure>
<ol start="6">
<li>重设表空间大小</li>
</ol>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">## 重设大小会清空表空间下所有数据！</span></span><br><span class="line"><span class="comment">## 设计表空间一定要合理！</span></span><br><span class="line"></span><br><span class="line">db2 <span class="string">&quot;alter tablespace USERSP4 resize (all 30M)&quot;</span> </span><br></pre></td></tr></table></figure>

      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

      
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="zh-CN">
    <link itemprop="mainEntityOfPage" href="http://example.com/2021/01/15/DB2%E6%9F%A5%E7%9C%8B%E8%A1%A8%E5%88%86%E5%8C%BA/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/00-00-00.JPG">
      <meta itemprop="name" content="severus">
      <meta itemprop="description" content="正在享受无法回避的痛苦">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Sary.severus`s blog">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          
            <a href="/2021/01/15/DB2%E6%9F%A5%E7%9C%8B%E8%A1%A8%E5%88%86%E5%8C%BA/" class="post-title-link" itemprop="url">未命名</a>
        </h2>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">发表于</span>

              <time title="创建时间：2021-01-15 14:28:30" itemprop="dateCreated datePublished" datetime="2021-01-15T14:28:30+08:00">2021-01-15</time>
            </span>

          

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <h1 id="DB2查看表分区"><a href="#DB2查看表分区" class="headerlink" title="DB2查看表分区"></a>DB2查看表分区</h1><h3 id="查看表分区"><a href="#查看表分区" class="headerlink" title="查看表分区"></a>查看表分区</h3><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">SELECT</span> <span class="operator">*</span> <span class="keyword">FROM</span> SYSCAT.datapartitions <span class="keyword">WHERE</span> TABNAME<span class="operator">=</span><span class="string">&#x27;TABLE.NAME&#x27;</span></span><br></pre></td></tr></table></figure>



      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  


  
  <nav class="pagination">
    <a class="extend prev" rel="prev" href="/page/4/"><i class="fa fa-angle-left" aria-label="上一页"></i></a><a class="page-number" href="/">1</a><span class="space">&hellip;</span><a class="page-number" href="/page/4/">4</a><span class="page-number current">5</span><a class="page-number" href="/page/6/">6</a><a class="page-number" href="/page/7/">7</a><a class="extend next" rel="next" href="/page/6/"><i class="fa fa-angle-right" aria-label="下一页"></i></a>
  </nav>



          </div>
          

<script>
  window.addEventListener('tabs:register', () => {
    let { activeClass } = CONFIG.comments;
    if (CONFIG.comments.storage) {
      activeClass = localStorage.getItem('comments_active') || activeClass;
    }
    if (activeClass) {
      let activeTab = document.querySelector(`a[href="#comment-${activeClass}"]`);
      if (activeTab) {
        activeTab.click();
      }
    }
  });
  if (CONFIG.comments.storage) {
    window.addEventListener('tabs:click', event => {
      if (!event.target.matches('.tabs-comment .tab-content .tab-pane')) return;
      let commentClass = event.target.classList[1];
      localStorage.setItem('comments_active', commentClass);
    });
  }
</script>

        </div>
          
  
  <div class="toggle sidebar-toggle">
    <span class="toggle-line toggle-line-first"></span>
    <span class="toggle-line toggle-line-middle"></span>
    <span class="toggle-line toggle-line-last"></span>
  </div>

  <aside class="sidebar">
    <div class="sidebar-inner">

      <ul class="sidebar-nav motion-element">
        <li class="sidebar-nav-toc">
          文章目录
        </li>
        <li class="sidebar-nav-overview">
          站点概览
        </li>
      </ul>

      <!--noindex-->
      <div class="post-toc-wrap sidebar-panel">
      </div>
      <!--/noindex-->

      <div class="site-overview-wrap sidebar-panel">
        <div class="site-author motion-element" itemprop="author" itemscope itemtype="http://schema.org/Person">
    <img class="site-author-image" itemprop="image" alt="severus"
      src="/images/00-00-00.JPG">
  <p class="site-author-name" itemprop="name">severus</p>
  <div class="site-description" itemprop="description">正在享受无法回避的痛苦</div>
</div>
<div class="site-state-wrap motion-element">
  <nav class="site-state">
      <div class="site-state-item site-state-posts">
          <a href="/archives/">
        
          <span class="site-state-item-count">66</span>
          <span class="site-state-item-name">日志</span>
        </a>
      </div>
      <div class="site-state-item site-state-tags">
        <span class="site-state-item-count">1</span>
        <span class="site-state-item-name">标签</span>
      </div>
  </nav>
</div>



      </div>

    </div>
  </aside>
  <div id="sidebar-dimmer"></div>


      </div>
    </main>

    <footer class="footer">
      <div class="footer-inner">
        

        

<div class="copyright">
  
  &copy; 1876 – 
  <span itemprop="copyrightYear">2021</span>
  <span class="with-love">
    <i class="fa fa-heart"></i>
  </span>
  <span class="author" itemprop="copyrightHolder">severus</span>
</div>
  <div class="powered-by">由 <a href="https://hexo.io/" class="theme-link" rel="noopener" target="_blank">Hexo</a> & <a href="https://muse.theme-next.org/" class="theme-link" rel="noopener" target="_blank">NexT.Muse</a> 强力驱动
  </div>

        








      </div>
    </footer>
  </div>

  
  <script src="/lib/anime.min.js"></script>
  <script src="/lib/velocity/velocity.min.js"></script>
  <script src="/lib/velocity/velocity.ui.min.js"></script>

<script src="/js/utils.js"></script>

<script src="/js/motion.js"></script>


<script src="/js/schemes/muse.js"></script>


<script src="/js/next-boot.js"></script>




  















  

  

</body>
</html>
